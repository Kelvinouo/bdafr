-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@rbxts", "roact").src);
local v3 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v4 = v2.Component:extend("PlayerViewport");
function v4.init(p1)
	p1.viewportRef = v2.createRef();
	p1.cameraRef = v2.createRef();
end;
local u1 = v1.import(script, v1.getModule(script, "@rbxts", "make"));
local l__Players__2 = v3.Players;
function v4.updateViewport(p2)
	local v5 = p2.viewportRef:getValue();
	if v5 == nil then
		return nil;
	end;
	local l__Kit__6 = v5:FindFirstChild("Kit");
	if l__Kit__6 ~= nil then
		l__Kit__6:Destroy();
	end;
	local v7 = u1("WorldModel", {
		Name = "Kit", 
		Parent = v5
	});
	local v8 = nil;
	local v9 = l__Players__2.LocalPlayer;
	if v9 ~= nil then
		v9 = v9.Character;
	end;
	if v9 ~= nil then
		l__Players__2.LocalPlayer.Character:WaitForChild("HumanoidRootPart");
		l__Players__2.LocalPlayer.Character.Archivable = true;
		v8 = l__Players__2.LocalPlayer.Character:Clone();
	end;
	if not v8 then
		return nil;
	end;
	local v10, v11, v12 = ipairs((v8:GetDescendants()));
	while true do
		v10(v11, v12);
		if not v10 then
			break;
		end;
		v12 = v10;
		if v11:IsA("LocalScript") then
			v11:Destroy();
		end;	
	end;
	local l__Animation__13 = p2.props.Animation;
	if l__Animation__13 ~= "" and l__Animation__13 then
		v8.AncestryChanged:Connect(function(p3, p4)
			if p4 ~= nil and p4:IsDescendantOf(game) then
				local v14 = v8;
				if v14 ~= nil then
					v14 = v14:FindFirstChild("Humanoid");
					if v14 ~= nil then
						v14 = v14:FindFirstChild("Animator");
					end;
				end;
				local v15 = v14;
				if not v15 then
					local v16 = {};
					local v17 = v8;
					if v17 ~= nil then
						v17 = v17:FindFirstChild("Humanoid");
					end;
					v16.Parent = v17;
					v15 = u1("Animator", v16);
				end;
				local v18 = v15:LoadAnimation(u1("Animation", {
					AnimationId = p2.props.Animation
				}));
				if p2.props.AnimationSpeed ~= nil then
					v18:AdjustSpeed(p2.props.AnimationSpeed);
				end;
				v18.Looped = true;
				v18:Play();
			end;
		end);
	end;
	v8.Name = "Kit";
	v8.Parent = v7;
	if v8.PrimaryPart then
		v8:SetPrimaryPartCFrame(CFrame.new() * CFrame.Angles(0, -0.3490658503988659, 0));
	else
		print("No primary part found when mounting kit model. Are your assets out of date?");
	end;
	local v19, v20 = v8:GetBoundingBox();
	local l__Position__21 = v19.Position;
	p2.cameraRef:getValue().CFrame = CFrame.new(l__Position__21 + Vector3.new(0, 0.8 * 50, (-1 * math.max(v20.X, v20.Y, v20.Z) / 1.3 - 3) * 50), l__Position__21);
	if p2.props.Rotate then
		p2:rotateKit(v8);
	end;
end;
local l__TweenService__3 = v3.TweenService;
function v4.rotateKit(p5, p6)
	if not p6.PrimaryPart then
		return nil;
	end;
	local v22 = TweenInfo.new(3, Enum.EasingStyle.Linear);
	local v23 = l__TweenService__3:Create(p6.PrimaryPart, v22, {
		CFrame = p6.PrimaryPart.CFrame * CFrame.Angles(0, 2.0943951023931953, 0)
	});
	local v24 = l__TweenService__3:Create(p6.PrimaryPart, v22, {
		CFrame = p6.PrimaryPart.CFrame * CFrame.Angles(0, 4.1887902047863905, 0)
	});
	local v25 = l__TweenService__3:Create(p6.PrimaryPart, v22, {
		CFrame = p6.PrimaryPart.CFrame * CFrame.Angles(0, 6.283185307179586, 0)
	});
	v23:Play();
	v23.Completed:Connect(function()
		v24:Play();
	end);
	v24.Completed:Connect(function()
		v25:Play();
	end);
	v25.Completed:Connect(function()
		v23:Play();
	end);
end;
function v4.didMount(p7)
	local v26 = p7.viewportRef:getValue();
	v26.Ambient = Color3.fromRGB(162, 162, 162);
	v26.LightColor = Color3.fromRGB(255, 255, 255);
	v26.LightDirection = Vector3.new(0, -1, 0);
	v26.CurrentCamera = p7.cameraRef:getValue();
	task.spawn(function()
		p7:updateViewport();
	end);
end;
function v4.didUpdate(p8, p9)
	if p8.props.Animation ~= p9.Animation then
		task.spawn(function()
			p8:updateViewport();
		end);
	end;
end;
function v4.render(p10)
	local v27 = {};
	for v28, v29 in pairs(p10.props) do
		v27[v28] = v29;
	end;
	v27[v2.Children] = nil;
	v27.Animation = nil;
	v27.AnimationSpeed = nil;
	v27.Rotate = nil;
	local v30 = {
		Size = UDim2.fromScale(1, 1), 
		BackgroundColor3 = Color3.fromRGB(0, 0, 0), 
		BorderSizePixel = 0, 
		BackgroundTransparency = 1
	};
	local v31 = p10.props.ImageTransparency;
	if v31 == nil then
		v31 = 0;
	end;
	v30.ImageTransparency = v31;
	v30[v2.Ref] = p10.viewportRef;
	for v32, v33 in pairs(v27) do
		v30[v32] = v33;
	end;
	local v34 = { v2.createElement("Camera", {
			FieldOfView = 1, 
			[v2.Ref] = p10.cameraRef
		}) };
	local v35 = #v34;
	local v36 = p10.props[v2.Children];
	if v36 then
		local v37, v38, v39 = pairs(v36);
		while true do
			local v40 = nil;
			local v41 = nil;
			v41, v40 = v37(v38, v39);
			if not v41 then
				break;
			end;
			v39 = v41;
			if type(v41) == "number" then
				v34[v35 + v41] = v40;
			else
				v34[v41] = v40;
			end;		
		end;
	end;
	return v2.createElement("ViewportFrame", v30, v34);
end;
return {
	PlayerViewport = v4
};
