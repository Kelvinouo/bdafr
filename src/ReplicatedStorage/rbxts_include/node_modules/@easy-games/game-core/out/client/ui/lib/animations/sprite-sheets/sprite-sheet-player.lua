-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = setmetatable({}, {
	__tostring = function()
		return "SpriteSheetPlayer";
	end
});
v2.__index = v2;
function v2.new(...)
	local v3 = setmetatable({}, v2);
	return v3:constructor(...) and v3;
end;
local l__RunService__1 = v1.import(script, v1.getModule(script, "@rbxts", "services")).RunService;
function v2.constructor(p1, p2, p3)
	p1.image = p2;
	p1.spriteSheet = p3;
	p1.composition = {};
	p1.currentFrame = 0;
	p1.playing = false;
	p1.paused = false;
	local v4 = 0;
	local v5 = false;
	while true do
		if v5 then
			v4 = v4 + 1;
		else
			v5 = true;
		end;
		if not (v4 < p1.spriteSheet.frames) then
			break;
		end;
		table.insert(p1.composition, (Vector2.new(v4 % 5, (math.floor(v4 / p1.spriteSheet.columns)))));	
	end;
	if p2 then
		local v6 = p3.config;
		if v6 ~= nil then
			v6 = v6.frameRate;
		end;
		local v7 = v6;
		if v7 == nil then
			v7 = 0.041666666666666664;
		end;
		local u2 = 0;
		p1.connection = l__RunService__1.Heartbeat:Connect(function(p4)
			if not p1.playing or p1.paused then
				return nil;
			end;
			u2 = u2 + p4;
			if v7 <= u2 then
				u2 = 0;
				p2.ImageRectOffset = p1.composition[p1.currentFrame + 1] * p2.ImageRectSize;
				p1.currentFrame = p1.currentFrame + 1;
				p1.currentFrame = p1.currentFrame % p1.spriteSheet.frames;
				local v8 = p1.currentFrame == 0;
				if v8 then
					local v9 = p1.spriteSheet.config;
					if v9 ~= nil then
						v9 = v9.looped;
					end;
					v8 = v9 == false and p1.connection;
				end;
				if v8 then
					p1.connection:Disconnect();
				end;
			end;
		end);
	end;
end;
function v2.play(p5)
	p5.playing = true;
	p5.paused = false;
	return p5.connection;
end;
function v2.pause(p6)
	p6.playing = false;
	p6.paused = true;
end;
function v2.stop(p7)
	p7.playing = false;
	p7.image.ImageRectOffset = p7.composition[1] * p7.image.ImageRectSize;
end;
function v2.disconnect(p8)
	local l__connection__10 = p8.connection;
	if l__connection__10 ~= nil then
		l__connection__10:Disconnect();
	end;
end;
return {
	SpriteSheetPlayer = v2
};
