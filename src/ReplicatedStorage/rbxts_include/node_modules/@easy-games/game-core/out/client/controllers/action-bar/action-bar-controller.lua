-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@flamework", "core").out);
local l__Reflect__3 = v2.Reflect;
local v4 = v1.import(script, v1.getModule(script, "@flamework", "core").out);
local v5 = setmetatable({}, {
	__tostring = function()
		return "ActionBarController";
	end
});
v5.__index = v5;
function v5.new(...)
	local v6 = setmetatable({}, v5);
	return v6:constructor(...) and v6;
end;
local u1 = v1.import(script, v1.getModule(script, "@rbxts", "roact").src);
local u2 = v1.import(script, v1.getModule(script, "@rbxts", "signal"));
function v5.constructor(p1)
	p1.childElementOrder = "ascending";
	p1.actionBarRef = u1.createRef();
	p1.actionBarMounted = u2.new();
	p1.childElementQueue = {};
end;
local l__Flamework__3 = v2.Flamework;
function v5.onStart(p2)
	p2.actionBarMounted:Connect(function(p3, p4)
		print("Action bar mounted fired!");
		local l__childElementQueue__7 = p2.childElementQueue;
		local function v8(p5)
			if p5.component then
				print("Mounted a component through queue way...");
				local u4 = u1.mount(p5.component, p4);
				p5.removeMaid:GiveTask(function()
					u1.unmount(u4);
				end);
			elseif p5.uiApp then
				l__Flamework__3.resolveDependency("@easy-games/game-core:client/controllers/app-controller@AppController"):openApp(p5.uiApp.app, p5.uiApp.props, nil, p4);
				p5.removeMaid:GiveTask(function()
					if p5.uiApp then
						l__Flamework__3.resolveDependency("@easy-games/game-core:client/controllers/app-controller@AppController"):closeApp(p5.uiApp.app);
					end;
				end);
			end;
			p2:updateLayoutOrder();
		end;
		for v9, v10 in ipairs(l__childElementQueue__7) do
			v8(v10, v9 - 1, l__childElementQueue__7);
		end;
	end);
	l__Flamework__3.resolveDependency("@easy-games/game-core:client/controllers/action-bar/action-bar-controller@ActionBarController"):mountActionBar({});
end;
local l__ActionBar__5 = v1.import(script, script.Parent, "action-bar").ActionBar;
local l__Players__6 = v1.import(script, v1.getModule(script, "@rbxts", "services")).Players;
function v5.mountActionBar(p6, p7)
	if p6.actionBarTree then
		u1.unmount(p6.actionBarTree);
		p6.actionBarRef = u1.createRef();
	end;
	local v11 = {};
	local v12 = {};
	for v13, v14 in pairs(p7) do
		v12[v13] = v14;
	end;
	v11[#v11 + 1] = u1.createElement(l__ActionBar__5, v12);
	p6.actionBarTree = u1.mount(u1.createFragment({
		ActionBarScreenGui = u1.createElement("ScreenGui", {
			ResetOnSpawn = false
		}, v11)
	}), l__Players__6.LocalPlayer:WaitForChild("PlayerGui"));
	return p6.actionBarTree;
end;
function v5.unmountActionBar(p8)
	if p8.actionBarTree then
		u1.unmount(p8.actionBarTree);
		p8.actionBarRef = u1.createRef();
	end;
end;
local u7 = v1.import(script, v1.getModule(script, "@rbxts", "maid").Maid);
function v5.addApp(p9, p10, p11)
	local v15 = u7.new();
	local v16 = p9.actionBarRef;
	if v16 ~= nil then
		v16 = v16:getValue();
	end;
	if v16 then
		local v17 = l__Flamework__3.resolveDependency("@easy-games/game-core:client/controllers/app-controller@AppController"):openApp(p10, p11, nil, v16);
		p9:updateLayoutOrder();
		return v17;
	end;
	warn("The ActionBar has not been mounted. Make sure you've mounted the ActionBar component from game-core in your game.");
	table.insert(p9.childElementQueue, {
		uiApp = {
			app = p10, 
			props = p11
		}, 
		removeMaid = v15
	});
	v15:GiveTask(function()
		local v18 = {};
		local v19 = 0;
		local v20, v21, v22 = ipairs(p9.childElementQueue);
		while true do
			local v23, v24 = v20(v21, v22);
			if not v23 then
				break;
			end;
			local v25 = v24.uiApp;
			if v25 ~= nil then
				v25 = v25.app;
			end;
			if v25 ~= p10 == true then
				v19 = v19 + 1;
				v18[v19] = v24;
			end;		
		end;
		p9.childElementQueue = v18;
	end);
	return false;
end;
function v5.addComponent(p12, p13)
	local v26 = u7.new();
	local v27 = p12.actionBarRef;
	if v27 ~= nil then
		v27 = v27:getValue();
	end;
	if not v27 then
		warn("The ActionBar has not been mounted. Make sure you've mounted the ActionBar component from game-core in your game.");
		table.insert(p12.childElementQueue, {
			component = p13, 
			removeMaid = v26
		});
		v26:GiveTask(function()
			local v28 = {};
			local v29 = 0;
			local v30, v31, v32 = ipairs(p12.childElementQueue);
			while true do
				local v33, v34 = v30(v31, v32);
				if not v33 then
					break;
				end;
				if v34.component ~= p13 == true then
					v29 = v29 + 1;
					v28[v29] = v34;
				end;			
			end;
			p12.childElementQueue = v28;
		end);
		return v26;
	end;
	print("Mounted a component normal way...");
	local v35 = u1.mount(p13, v27);
	p12:updateLayoutOrder();
	v26:GiveTask(function()
		u1.unmount(v35);
	end);
	return v26;
end;
function v5.waitForActionBarAddComponent(p14, p15)
	local v36 = p14.actionBarRef;
	if v36 ~= nil then
		v36 = v36:getValue();
	end;
	if not v36 then
		p14.actionBarMounted:Wait();
	end;
	return u1.mount(p15, v36);
end;
function v5.updateLayoutOrder(p16)
	local v37 = p16.actionBarRef;
	if v37 ~= nil then
		v37 = v37:getValue();
	end;
	if v37 then
		for v38, v39 in ipairs((v37:GetChildren())) do
			if v39:IsA("GuiObject") then
				if p16.childElementOrder == "ascending" then
					local v40 = -1;
				else
					v40 = 1;
				end;
				v39.LayoutOrder = v40 * (v38 - 1);
			end;
		end;
	end;
end;
l__Reflect__3.defineMetadata(v5, "identifier", "@easy-games/game-core:client/controllers/action-bar/action-bar-controller@ActionBarController");
l__Reflect__3.defineMetadata(v5, "flamework:implements", { "$:flamework@OnStart" });
l__Reflect__3.decorate(v5, "$:flamework@Controller", v4.Controller, { {} });
l__Reflect__3.decorate(v5, "$:flamework@External", v4.External, {});
return {
	ActionBarController = v5
};
