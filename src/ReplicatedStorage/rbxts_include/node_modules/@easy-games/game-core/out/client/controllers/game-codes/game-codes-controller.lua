-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local l__Reflect__2 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Reflect;
local l__Controller__3 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Controller;
local v4 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "game-core-networking");
local v5 = setmetatable({}, {
	__tostring = function()
		return "GameCodesController";
	end
});
v5.__index = v5;
function v5.new(...)
	local v6 = setmetatable({}, v5);
	return v6:constructor(...) and v6;
end;
local l__ExpireList__1 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "object", "expire-list").ExpireList;
function v5.constructor(p1)
	p1.rateLimiter = l__ExpireList__1.new(1);
end;
local l__GameCoreNetEvents__2 = v4.GameCoreNetEvents;
local l__GameCoreClientConfig__3 = v1.import(script, script.Parent.Parent.Parent, "config", "game-core-config").GameCoreClientConfig;
function v5.onStart(p2)
	p2:requestCodeGenUpdate();
	l__GameCoreNetEvents__2.client.sendCodeGenUpdate:connect(function(p3)
		l__GameCoreClientConfig__3.Store:dispatch({
			type = "CodeGenUpdate", 
			codeGenerators = p3.codeGenerators
		});
	end);
end;
local l__Players__4 = v1.import(script, v1.getModule(script, "@rbxts", "services")).Players;
local l__ColorUtil__5 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "util", "color-util").ColorUtil;
local l__GameTheme__6 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "ui", "game-theme").GameTheme;
local l__GameCoreNetFunctions__7 = v4.GameCoreNetFunctions;
function v5.regenCodes(p4, p5)
	local l__UserId__7 = l__Players__4.LocalPlayer.UserId;
	if p4.rateLimiter:has(l__UserId__7) then
		return v1.Promise.new(function(p6)
			p6({
				success = false, 
				errorMessage = "<font color=\"" .. l__ColorUtil__5.richTextColor(l__GameTheme__6.backgroundError) .. "\"><b>\240\159\154\171 Error:</b></font> You've made to many requests. Please slow down a bit!"
			});
		end);
	end;
	p4.rateLimiter:add(l__UserId__7);
	return l__GameCoreNetFunctions__7.client.regenCodeGenerator:invoke(p5);
end;
function v5.redeemCode(p7, p8)
	local l__UserId__8 = l__Players__4.LocalPlayer.UserId;
	if p7.rateLimiter:has(l__UserId__8) then
		return v1.Promise.new(function(p9)
			p9({
				success = false, 
				errorMessage = "<font color=\"" .. l__ColorUtil__5.richTextColor(l__GameTheme__6.backgroundError) .. "\"><b>\240\159\154\171 Error:</b></font> You've made to many requests. Please slow down a bit!"
			});
		end);
	end;
	p7.rateLimiter:add(l__UserId__8);
	return l__GameCoreNetFunctions__7.client.redeemCode:invoke(p8);
end;
function v5.requestCodeGenUpdate(p10)
	l__GameCoreNetEvents__2.client.requestCodeGenUpdate:fire();
end;
l__Reflect__2.defineMetadata(v5, "identifier", "@easy-games/game-core:client/controllers/game-codes/game-codes-controller@GameCodesController");
l__Reflect__2.defineMetadata(v5, "flamework:implements", { "$:flamework@OnStart" });
l__Reflect__2.decorate(v5, "$:flamework@Controller", l__Controller__3, { {} });
return {
	GameCodesController = v5
};
