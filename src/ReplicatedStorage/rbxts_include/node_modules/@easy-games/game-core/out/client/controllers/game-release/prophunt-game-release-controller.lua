-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local l__Reflect__2 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Reflect;
local l__Controller__3 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Controller;
local v4 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v5 = setmetatable({}, {
	__tostring = function()
		return "ProphuntGameReleaseController";
	end
});
v5.__index = v5;
function v5.new(...)
	local v6 = setmetatable({}, v5);
	return v6:constructor(...) and v6;
end;
function v5.constructor(p1, p2)
	p1.notificationController = p2;
	p1.placeId = 9611595239;
end;
local l__WatchCollectionTag__1 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "util", "collection-util").WatchCollectionTag;
local l__ProphuntGameRelease__2 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "game-release", "releases", "prophunt-game-release").ProphuntGameRelease;
local u3 = v1.import(script, v1.getModule(script, "@rbxts", "maid").Maid);
local l__GameCoreSharedSyncEvents__4 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "game-core-shared-events").GameCoreSharedSyncEvents;
local l__GameReleaseId__5 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "game-release", "game-release-id").GameReleaseId;
local l__TweenService__6 = v4.TweenService;
local l__CollectionService__7 = v4.CollectionService;
local u8 = v1.import(script, v1.getModule(script, "@rbxts", "make"));
local l__ContentProvider__9 = v4.ContentProvider;
function v5.onStart(p3)
	l__WatchCollectionTag__1(l__ProphuntGameRelease__2.COUNTDOWN_MODEL_TAG, function(p4)
		if not p3.gameRelease then
			return nil;
		end;
		local v7 = u3.new();
		if not p4.PrimaryPart then
			p4:GetPropertyChangedSignal("PrimaryPart"):Wait();
		end;
		v7:GiveTask(l__GameCoreSharedSyncEvents__4.GameReleaseShowContent:connect(function(p5)
			if p5.gameId ~= l__GameReleaseId__5.PROPHUNT then
				return nil;
			end;
			local v8 = Instance.new("CFrameValue");
			v8.Value = p4.PrimaryPart.CFrame;
			v8.Changed:Connect(function(p6)
				p4:SetPrimaryPartCFrame(p6);
			end);
			v8.Parent = p4;
			task.delay(1, function()
				local v9 = l__TweenService__6:Create(v8, TweenInfo.new(5, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
					Value = p4:GetPrimaryPartCFrame() + Vector3.new(0, -50, 0)
				});
				v9:Play();
				v9.Completed:Wait();
				p4:Destroy();
			end);
		end));
		p4.Destroying:Connect(function()
			v7:DoCleaning();
		end);
	end);
	l__WatchCollectionTag__1(l__ProphuntGameRelease__2.RELEASED_CONTENT_MODEL_TAG, function(p7)
		local v10 = p7:GetAttribute("GameReleaseFromCountdown");
		p3:hookPortal((p7:WaitForChild("Portal")));
		if not v10 then
			return nil;
		end;
		print("showing content from countdown!");
		task.delay(5.5, function()
			local v11 = Instance.new("CFrameValue");
			v11.Value = p7:GetPrimaryPartCFrame();
			v11.Parent = p7;
			v11.Changed:Connect(function(p8)
				p7:SetPrimaryPartCFrame(p8);
			end);
			l__TweenService__6:Create(v11, TweenInfo.new(5.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
				Value = p7:GetPrimaryPartCFrame() + Vector3.new(0, 50, 0)
			}):Play();
		end);
		local u10 = l__CollectionService__7:GetTagged("prophunt-rock-particles");
		task.spawn(function()
			local v12, v13, v14 = ipairs(u10);
			while true do
				v12(v13, v14);
				if not v12 then
					break;
				end;
				v14 = v12;
				local v15 = 0;
				while v15 < 10 do
					local v16 = 0;
					local v17 = false;
					while true do
						if v17 then
							v16 = v16 + 1;
						else
							v17 = true;
						end;
						if not (v16 < 15) then
							break;
						end;
						if math.random() > 0.5 then
							local v18 = 1;
						else
							v18 = -1;
						end;
						if math.random() > 0.5 then
							local v19 = 1;
						else
							v19 = -1;
						end;
						if math.random() > 0.5 then
							local v20 = 1;
						else
							v20 = -1;
						end;
						p3:spawnPixelParticle(CFrame.new(v13.CFrame * Vector3.new(v18 * math.random() * (v13.Size.X / 2), v19 * math.random() * (v13.Size.Y / 2), v20 * math.random() * (v13.Size.Z / 2))), {
							particleBaseSize = 0.45, 
							color = Color3.fromHex("916d53")
						});					
					end;
					local v21 = 0.14 + math.random() * 0.08;
					v15 = v15 + v21;
					task.wait(v21);				
				end;			
			end;
		end);
	end);
	task.spawn(function()
		l__ContentProvider__9:PreloadAsync({ (u8("Sound", {
				SoundId = "rbxassetid://6445706475"
			})) });
	end);
end;
local l__Players__11 = v4.Players;
local l__Workspace__12 = v4.Workspace;
local l__TeleportService__13 = v4.TeleportService;
function v5.hookPortal(p9, p10)
	local u14 = 0;
	p10.Touched:Connect(function(p11)
		local v22 = p11:FindFirstAncestorWhichIsA("Model");
		if not v22 then
			return nil;
		end;
		local v23 = l__Players__11:GetPlayerFromCharacter(v22);
		if not v23 or v23 ~= l__Players__11.LocalPlayer then
			return nil;
		end;
		if l__Workspace__12:GetServerTimeNow() - u14 < 2 then
			return nil;
		end;
		u14 = l__Workspace__12:GetServerTimeNow();
		l__TeleportService__13:Teleport(p9.placeId);
		p9.notificationController:sendInfoNotification({
			message = "Teleporting to Battle Royale!"
		});
	end);
end;
function v5.enableProphuntGameRelease(p12, p13, p14, p15)
	p12.gameRelease = l__ProphuntGameRelease__2.new(u8("Model", {}), p13, u8("Model", {}), p14, p15);
	task.spawn(function()
		l__ContentProvider__9:PreloadAsync({ u8("Sound", {
				SoundId = p15
			}) });
	end);
	return p12.gameRelease;
end;
local l__PhysicsService__15 = v4.PhysicsService;
local l__Debris__16 = v4.Debris;
function v5.spawnPixelParticle(p16, p17, p18)
	local v24 = 0;
	local v25 = false;
	while true do
		if v25 then
			v24 = v24 + 1;
		else
			v25 = true;
		end;
		local v26 = p18;
		if v26 ~= nil then
			v26 = v26.count;
		end;
		local v27 = v26;
		if v27 == nil then
			v27 = 1;
		end;
		if not (v24 < v27) then
			break;
		end;
		local v28 = Vector3.new(math.random(-100, 100) / 100 * 5, math.random(50, 100) / 100 * 16, math.random(-100, 100) / 100 * 5) * 0.75;
		local v29 = p18;
		if v29 ~= nil then
			v29 = v29.particleBaseSize;
		end;
		local v30 = v29;
		if v30 == nil then
			v30 = 0.18;
		end;
		local v31 = v30 * math.random(80, 150) / 100;
		local v32 = p18;
		if v32 ~= nil then
			v32 = v32.textureId;
		end;
		local v33 = v32;
		if v33 == nil then
			v33 = "rbxassetid://5274332913";
		end;
		local v34 = Instance.new("Part");
		v34.Size = Vector3.new(0.2, 0.2, 0.2);
		v34.CFrame = p17;
		v34.Velocity = v28;
		v34.Transparency = 1;
		v34.CanCollide = false;
		v1.Promise.defer(function()
			wait(0.05);
			v34.CanCollide = true;
		end);
		l__PhysicsService__15:SetPartCollisionGroup(v34, "Players");
		local v35 = Instance.new("BodyForce");
		v35.Force = Vector3.new(0, v34:GetMass() * l__Workspace__12.Gravity / 1.3, 0);
		v35.Parent = v34;
		local v36 = Instance.new("BillboardGui");
		v36.Size = UDim2.new(v31, 0, v31, 0);
		v36.LightInfluence = 0;
		local v37 = Instance.new("ImageLabel");
		local v38 = p18;
		if v38 ~= nil then
			v38 = v38.color;
		end;
		if v38 then
			v37.Image = "rbxassetid://5607858133";
			v37.ImageColor3 = v38;
		else
			v37.Image = v33;
			v37.ScaleType = Enum.ScaleType.Tile;
			v37.TileSize = UDim2.new(50, 0, 50, 0);
		end;
		local v39 = p18;
		if v39 ~= nil then
			v39 = v39.transparency;
		end;
		if v39 ~= nil then
			v37.Transparency = p18.transparency;
		end;
		v37.Size = UDim2.new(0, 0, 0, 0);
		v37.Position = UDim2.new(0.5, 0, 0.5, 0);
		v37.AnchorPoint = Vector2.new(0.5, 0.5);
		v37.BorderSizePixel = 0;
		v37.BackgroundTransparency = 1;
		v37.Parent = v36;
		l__TweenService__6:Create(v37, TweenInfo.new(0.1), {
			Size = UDim2.new(1, 0, 1, 0)
		}):Play();
		v36.Parent = v34;
		local v40 = Instance.new("BoolValue");
		v40.Name = "Targettable";
		v40.Value = false;
		v40.Parent = v34;
		v34.Parent = l__Workspace__12;
		v1.Promise.delay(0.78 + math.random() * 0.15):andThen(function()
			l__TweenService__6:Create(v37, TweenInfo.new(0.1), {
				Size = UDim2.new(0, 0, 0, 0)
			}):Play();
		end);
		l__Debris__16:AddItem(v34, 1);	
	end;
end;
l__Reflect__2.defineMetadata(v5, "identifier", "@easy-games/game-core:client/controllers/game-release/prophunt-game-release-controller@ProphuntGameReleaseController");
l__Reflect__2.defineMetadata(v5, "flamework:parameters", { "@easy-games/game-core:client/controllers/notification-controller@NotificationController" });
l__Reflect__2.defineMetadata(v5, "flamework:implements", { "$:flamework@OnStart" });
l__Reflect__2.decorate(v5, "$:flamework@Controller", l__Controller__3, { {} });
return {
	ProphuntGameReleaseController = v5
};
