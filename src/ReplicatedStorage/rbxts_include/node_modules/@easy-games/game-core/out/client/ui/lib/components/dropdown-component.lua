-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@rbxts", "roact").src);
local v3 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v4 = v2.Component:extend("DropdownComponent");
local u1 = v1.import(script, v1.getModule(script, "@rbxts", "maid").Maid);
local l__preloadImages__2 = v1.import(script, script.Parent.Parent.Parent.Parent.Parent, "shared", "util", "ui-utils").preloadImages;
local l__ImageId__3 = v1.import(script, script.Parent.Parent.Parent.Parent.Parent, "shared", "images", "image-id").ImageId;
local l__TextService__4 = v3.TextService;
function v4.init(p1, p2)
	local v5 = nil;
	p1.maid = u1.new();
	p1.textSize = 13;
	p1.textFont = Enum.Font.Roboto;
	p1.rootUiRef = v2.createRef();
	p1:setState({
		expanded = false, 
		selectedItem = p2.DefaultItem or v2.None
	});
	l__preloadImages__2({ l__ImageId__3.CARET_UP });
	local v6 = {};
	local l__Items__7 = p2.Items;
	table.move(l__Items__7, 1, #l__Items__7, #v6 + 1, v6);
	if p2.DefaultItem == nil then
		table.insert(v6, {
			text = p2.PlaceholderText, 
			value = p2.PlaceholderText
		});
	end;
	local function v8(p3)
		return l__TextService__4:GetTextSize(p3.text, p1.textSize, p1.textFont, Vector2.new()).X;
	end;
	local v9 = table.create(#v6);
	for v10, v11 in ipairs(v6) do
		v9[v10] = v8(v11, v10 - 1, v6);
	end;
	if #v9 == 0 then
		error("Attempted to call `ReadonlyArray.reduce()` on an empty array without an initialValue.");
	end;
	v5 = v9[1];
	local function v12(p4, p5)
		if p4 <= p5 then
			return p5;
		end;
		return p4;
	end;
	for v13 = 2, #v9 do
		v5 = v12(v5, v9[v13], v13 - 1, v9);
	end;
	p1.biggestItemWidth = 46 + local v14;
end;
local l__Players__5 = v3.Players;
local l__UserInputService__6 = v3.UserInputService;
function v4.didMount(p6)
	local v15 = l__Players__5.LocalPlayer;
	if v15 ~= nil then
		v15 = v15:FindFirstChildOfClass("PlayerGui");
	end;
	if not v15 or p6.props.OnSurfaceGui then
		return nil;
	end;
	local u7 = p6.rootUiRef:getValue();
	p6.maid:GiveTask(l__UserInputService__6.InputBegan:Connect(function(p7)
		if p7.UserInputType ~= Enum.UserInputType.MouseButton1 then
			return nil;
		end;
		local v16 = v15:GetGuiObjectsAtPosition(p7.Position.X, p7.Position.Y);
		local function v17(p8)
			local v18 = true;
			if p8 ~= u7 then
				v18 = p8:IsDescendantOf(u7);
			end;
			return v18;
		end;
		local v19 = {};
		local v20 = 0;
		for v21, v22 in ipairs(v16) do
			if v17(v22, v21 - 1, v16) == true then
				v20 = v20 + 1;
				v19[v20] = v22;
			end;
		end;
		if #v19 > 0 then
			return nil;
		end;
		p6:setState({
			expanded = false
		});
	end));
end;
local l__GameTheme__8 = v1.import(script, script.Parent.Parent.Parent.Parent.Parent, "shared", "ui", "game-theme").GameTheme;
function v4.render(p9)
	local l__Items__23 = p9.props.Items;
	local l__selectedItem__9 = p9.state.selectedItem;
	local function v24(p10)
		return p10 ~= l__selectedItem__9;
	end;
	local v25 = {};
	local v26 = 0;
	for v27, v28 in ipairs(l__Items__23) do
		if v24(v28, v27 - 1, l__Items__23) == true then
			v26 = v26 + 1;
			v25[v26] = v28;
		end;
	end;
	local v29 = {};
	for v30, v31 in pairs(p9.props) do
		v29[v30] = v31;
	end;
	v29.PlaceholderText = nil;
	v29.DefaultItem = nil;
	v29.OnSurfaceGui = nil;
	v29.Items = nil;
	v29.OnItemSelected = nil;
	v29.CornerRadius = nil;
	v29.ButtonColor = nil;
	local v32 = {
		Size = UDim2.fromOffset(p9.biggestItemWidth, 28), 
		BackgroundColor3 = p9.props.ButtonColor or l__GameTheme__8.interactionPrimary, 
		BorderSizePixel = 0, 
		ZIndex = 100, 
		Text = ""
	};
	v32[v2.Event.Activated] = function()
		p9:setState({
			expanded = not p9.state.expanded
		});
	end;
	v32[v2.Ref] = p9.rootUiRef;
	for v33, v34 in pairs(v29) do
		v32[v33] = v34;
	end;
	local v35 = { v2.createElement("UICorner", {
			CornerRadius = p9.props.CornerRadius or UDim.new(0, 5)
		}) };
	local v36 = #v35;
	local v37 = {
		Size = UDim2.fromScale(1, 1), 
		BorderSizePixel = 0, 
		BackgroundTransparency = 1
	};
	local v38 = { v2.createElement("UIListLayout", {
			FillDirection = "Horizontal", 
			HorizontalAlignment = "Center", 
			VerticalAlignment = "Center", 
			Padding = UDim.new(0, 4), 
			SortOrder = "LayoutOrder"
		}) };
	local v39 = #v38;
	local v40 = {
		Size = UDim2.new(1, -46, 1, 0), 
		BackgroundTransparency = 1, 
		TextColor3 = Color3.new(1, 1, 1), 
		RichText = true, 
		Font = Enum.Font.RobotoMono
	};
	local v41 = p9.state.selectedItem;
	if v41 ~= nil then
		v41 = v41.text;
	end;
	local v42 = v41;
	if v42 == "" or not v42 then
		v42 = p9.props.PlaceholderText;
	end;
	v40.Text = "<b>" .. tostring(v42) .. "</b>";
	v40.TextSize = 12;
	if p9.state.selectedItem then
		local v43 = 0;
	else
		v43 = 0.5;
	end;
	v40.TextTransparency = v43;
	v40.ZIndex = 101;
	v40.LayoutOrder = 1;
	v38[v39 + 1] = v2.createElement("TextLabel", v40);
	local v44 = {
		Size = UDim2.new(0, 12, 0, 10), 
		SizeConstraint = "RelativeYY", 
		ScaleType = "Fit"
	};
	if p9.state.expanded then
		local v45 = l__ImageId__3.CARET_UP;
	else
		v45 = l__ImageId__3.CARET_DOWN;
	end;
	v44.Image = v45;
	v44.BackgroundTransparency = 1;
	v44.ZIndex = 101;
	v44.LayoutOrder = 2;
	v38[v39 + 2] = v2.createElement("ImageLabel", v44);
	v35[v36 + 1] = v2.createElement("Frame", v37, v38);
	if p9.state.expanded then
		local function v46(p11, p12)
			local v47 = {
				LayoutOrder = p12, 
				Size = UDim2.new(1, 0, 0, 24), 
				BackgroundColor3 = p9.props.ButtonColor or l__GameTheme__8.interactionPrimary, 
				BorderSizePixel = 0, 
				TextColor3 = Color3.new(1, 1, 1), 
				RichText = true, 
				Font = Enum.Font.RobotoMono, 
				Text = "<b>" .. p11.text .. "</b>", 
				TextSize = 12, 
				Active = true
			};
			v47[v2.Event.Activated] = function()
				p9:setState({
					expanded = false, 
					selectedItem = p11
				});
				p9.props.OnItemSelected(p11.value);
			end;
			v47.ZIndex = 103;
			local v48 = {};
			if p12 == 0 or p12 == #v25 - 1 then
				local v49 = v2.createElement("UICorner", {
					CornerRadius = UDim.new(0, 5)
				});
			else
				v49 = nil;
			end;
			if v49 then
				v48[#v48 + 1] = v49;
			end;
			return v2.createFragment({
				[p11.value] = v2.createElement("TextButton", v47, v48)
			});
		end;
		local v50 = table.create(#v25);
		for v51, v52 in ipairs(v25) do
			v50[v51] = v46(v52, v51 - 1, v25);
		end;
		local v53 = {
			Position = UDim2.new(0, 0, 1, 2), 
			Size = UDim2.fromScale(1, 0), 
			AutomaticSize = Enum.AutomaticSize.Y, 
			BorderSizePixel = 0, 
			BackgroundColor3 = p9.props.ButtonColor or l__GameTheme__8.interactionPrimary, 
			Active = true, 
			ZIndex = 102
		};
		local v54 = { v2.createElement("UICorner", {
				CornerRadius = UDim.new(0, 5)
			}), v2.createElement("UIListLayout", {
				FillDirection = Enum.FillDirection.Vertical, 
				VerticalAlignment = Enum.VerticalAlignment.Top, 
				SortOrder = Enum.SortOrder.LayoutOrder, 
				Padding = UDim.new()
			}) };
		local v55 = #v54;
		for v56, v57 in ipairs(v50) do
			v54[v55 + v56] = v57;
		end;
		local v58 = v2.createElement("Frame", v53, v54);
	else
		v58 = nil;
	end;
	if v58 then
		v35[v36 + 2] = v58;
	end;
	return v2.createFragment({
		Dropdown = v2.createElement("TextButton", v32, v35)
	});
end;
function v4.willUnmount(p13)
	p13.maid:DoCleaning();
end;
return {
	DropdownComponent = v4
};
