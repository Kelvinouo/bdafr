-- Script Hash: a17e0018f8f5e2757558e25ca3f6a4ea7367aa9bea1b495a5769b28bfab0f8df5520de04015387b15b3a953f4e531a46
-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v3 = setmetatable({}, {
	__tostring = function()
		return "ClickHold";
	end
});
v3.__index = v3;
function v3.new(...)
	local v4 = setmetatable({}, v3);
	return v4:constructor(...) and v4;
end;
local u1 = v1.import(script, v1.getModule(script, "@rbxts", "roact").src);
function v3.constructor(p1, p2, p3)
	if p3 == nil then
		p3 = true;
	end;
	p1.durationSeconds = p2;
	p1.closeOnComplete = p3;
	p1.startedClickTime = -1;
	p1.wrapperRef = u1.createRef();
	p1.progressRef = u1.createRef();
	p1.tweens = {};
end;
function v3.startClick(p4, p5)
	p4.startedClickTime = tick();
	local u2 = p4:showProgress(p5);
	local l__startedClickTime__3 = p4.startedClickTime;
	v1.Promise.defer(function()
		wait(p4.durationSeconds);
		if u2 == p4.handle and l__startedClickTime__3 == p4.startedClickTime and p4.closeOnComplete then
			p4:hideProgress();
			if p4.onComplete ~= nil then
				p4.onComplete();
			end;
			if p4.onPartialComplete ~= nil then
				p4.onPartialComplete(1);
			end;
			p4.startedClickTime = -1;
		end;
	end);
end;
local l__ColorUtil__4 = v1.import(script, script.Parent.Parent.Parent.Parent.Parent, "shared", "util", "color-util").ColorUtil;
local l__Empty__5 = v1.import(script, script.Parent.Parent, "components", "empty").Empty;
local l__Countdown__6 = v1.import(script, script.Parent.Parent, "components", "countdown").Countdown;
local l__Players__7 = v2.Players;
local l__TweenService__8 = v2.TweenService;
function v3.showProgress(p6, p7)
	local v5 = p7;
	if v5 ~= nil then
		v5 = v5.image;
	end;
	local v6 = v5 ~= nil;
	local v7 = p7;
	if v7 ~= nil then
		v7 = v7.showTimer;
	end;
	local v8 = 1;
	if v6 then
		v8 = v8 - 0.2;
	end;
	if v7 then
		v8 = v8 - 0.2;
	end;
	local v9 = {};
	local v10 = {};
	local v11 = p7;
	if v11 ~= nil then
		v11 = v11.size;
	end;
	local v12 = v11;
	if v12 == nil then
		v12 = UDim2.new(0.11, 0, 0.015, 0);
	end;
	v10.Size = v12;
	v10.Position = UDim2.new(0.5, 0, 0.55, 0);
	local v13 = { u1.createElement("UIListLayout", {
			FillDirection = "Horizontal", 
			VerticalAlignment = "Center", 
			Padding = UDim.new(0.05, 0)
		}) };
	local v14 = v6 and u1.createElement("ImageLabel", {
		Size = UDim2.fromScale(1, 1), 
		Image = p7.image, 
		SizeConstraint = "RelativeYY", 
		ScaleType = "Fit", 
		BackgroundTransparency = 1
	});
	if v14 then
		v13[#v13 + 1] = v14;
	end;
	local v15 = #v13;
	local v16 = p7;
	if v16 ~= nil then
		v16 = v16.name;
	end;
	local v17 = v16 ~= nil and u1.createElement("TextLabel", {
		Size = UDim2.fromScale(1, 0.45), 
		Text = "<b>" .. p7.name .. "</b>", 
		TextScaled = true, 
		RichText = true, 
		Font = "Roboto", 
		TextXAlignment = "Left", 
		TextColor3 = l__ColorUtil__4.WHITE, 
		BackgroundTransparency = 1
	});
	local v18 = { u1.createElement("UIListLayout", {
			FillDirection = "Vertical", 
			HorizontalAlignment = "Left", 
			Padding = UDim.new(0.1, 0)
		}) };
	if v17 then
		v18[#v18 + 1] = v17;
	end;
	local v19 = {};
	local v20 = {
		[u1.Ref] = p6.progressRef, 
		Size = UDim2.new(0, 0, 1, 0)
	};
	local v21 = p7;
	if v21 ~= nil then
		v21 = v21.barColor;
	end;
	local v22 = v21;
	if v22 == nil then
		v22 = Color3.fromRGB(255, 255, 255);
	end;
	v20.BackgroundColor3 = v22;
	local v23 = p7;
	if v23 ~= nil then
		v23 = v23.barTransparency;
	end;
	local v24 = v23;
	if v24 == nil then
		v24 = 0.5;
	end;
	v20.BackgroundTransparency = v24;
	v19[#v19 + 1] = u1.createElement("Frame", v20);
	v18[#v18 + 1] = u1.createElement("Frame", {
		[u1.Ref] = p6.wrapperRef, 
		Size = UDim2.new(0, 0, 0, 0), 
		Position = UDim2.new(0.5, 0, 0.55, 0), 
		AnchorPoint = Vector2.new(0.5, 0), 
		BackgroundColor3 = Color3.fromRGB(0, 0, 0), 
		BackgroundTransparency = 0.8
	}, v19);
	v13[v15 + 1] = u1.createElement(l__Empty__5, {
		Size = UDim2.fromScale(v8, 1)
	}, v18);
	local v25 = v7 and u1.createElement(l__Countdown__6, {
		EndTime = p6.startedClickTime + p6.durationSeconds, 
		UseTick = true, 
		CountdownConfig = {
			days = false, 
			hours = false, 
			minutes = false, 
			disablePadding = true, 
			decimalPoints = 1, 
			seperator = ""
		}, 
		TextLabel = {
			Size = UDim2.fromScale(0.15, 0.5), 
			TextXAlignment = Enum.TextXAlignment.Left
		}
	});
	if v25 then
		v13[v15 + 2] = v25;
	end;
	v9[#v9 + 1] = u1.createElement(l__Empty__5, v10, v13);
	local v26 = u1.mount(u1.createElement("ScreenGui", {}, v9), l__Players__7.LocalPlayer:FindFirstChild("PlayerGui"));
	p6.handle = v26;
	local v27 = l__TweenService__8:Create(p6.wrapperRef:getValue(), TweenInfo.new(0.1), {
		Size = UDim2.new(1, 0, 0.45, 0)
	});
	table.insert(p6.tweens, v27);
	v27:Play();
	local v28 = l__TweenService__8:Create(p6.progressRef:getValue(), TweenInfo.new(p6.durationSeconds, Enum.EasingStyle.Linear), {
		Size = UDim2.new(1, 0, 1, 0)
	});
	table.insert(p6.tweens, v28);
	v28:Play();
	return v26;
end;
function v3.hideProgress(p8)
	local l__tweens__29 = p8.tweens;
	local function v30(p9)
		return p9:Cancel();
	end;
	for v31, v32 in ipairs(l__tweens__29) do
		v30(v32, v31 - 1, l__tweens__29);
	end;
	p8.tweens = {};
	if p8.handle then
		u1.unmount(p8.handle);
	end;
end;
function v3.endClick(p10)
	p10:hideProgress();
	if p10.startedClickTime > 0 then
		if p10.durationSeconds <= tick() - p10.startedClickTime and p10.onComplete ~= nil then
			p10.onComplete();
		end;
		if p10.onPartialComplete ~= nil then
			print("started: " .. tostring(p10.startedClickTime));
			print("duration: " .. tostring(p10.durationSeconds));
			p10.onPartialComplete((tick() - p10.startedClickTime) / p10.durationSeconds);
		end;
	end;
	p10.startedClickTime = -1;
end;
function v3.cancelClick(p11)
	p11.startedClickTime = -1;
	p11:hideProgress();
end;
function v3.disable(p12)
	p12.onComplete = nil;
	p12.onPartialComplete = nil;
	p12.startedClickTime = -1;
	p12:hideProgress();
end;
function v3.setOnComplete(p13, p14)
	p13.onComplete = p14;
end;
function v3.setOnPartialComplete(p15, p16)
	p15.onPartialComplete = p16;
end;
return {
	ClickHold = v3
};
