-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v3 = setmetatable({}, {
	__tostring = function()
		return "ClickHold";
	end
});
v3.__index = v3;
function v3.new(...)
	local v4 = setmetatable({}, v3);
	return v4:constructor(...) and v4;
end;
local u1 = v1.import(script, v1.getModule(script, "@rbxts", "roact").src);
function v3.constructor(p1, p2, p3)
	if p3 == nil then
		p3 = true;
	end;
	p1.durationSeconds = p2;
	p1.closeOnComplete = p3;
	p1.startedClickTime = -1;
	p1.wrapperRef = u1.createRef();
	p1.progressRef = u1.createRef();
	p1.tweens = {};
end;
function v3.startClick(p4)
	p4.startedClickTime = tick();
	local u2 = p4:showProgress();
	local l__startedClickTime__3 = p4.startedClickTime;
	v1.Promise.defer(function()
		wait(p4.durationSeconds);
		if u2 == p4.handle and l__startedClickTime__3 == p4.startedClickTime and p4.closeOnComplete then
			p4:hideProgress();
			if p4.onComplete ~= nil then
				p4.onComplete();
			end;
			if p4.onPartialComplete ~= nil then
				p4.onPartialComplete(1);
			end;
			p4.startedClickTime = -1;
		end;
	end);
end;
local l__Players__4 = v2.Players;
local l__TweenService__5 = v2.TweenService;
function v3.showProgress(p5)
	local v5 = u1.mount(u1.createElement("ScreenGui", {}, { u1.createElement("Frame", {
			[u1.Ref] = p5.wrapperRef, 
			Size = UDim2.new(0, 0, 0, 0), 
			Position = UDim2.new(0.5, 0, 0.55, 0), 
			AnchorPoint = Vector2.new(0.5, 0), 
			BackgroundColor3 = Color3.fromRGB(0, 0, 0), 
			BackgroundTransparency = 0.8
		}, { u1.createElement("Frame", {
				[u1.Ref] = p5.progressRef, 
				Size = UDim2.new(0, 0, 1, 0), 
				BackgroundColor3 = Color3.fromRGB(255, 255, 255), 
				BackgroundTransparency = 0.5
			}) }) }), l__Players__4.LocalPlayer:FindFirstChild("PlayerGui"));
	p5.handle = v5;
	local v6 = l__TweenService__5:Create(p5.wrapperRef:getValue(), TweenInfo.new(0.1), {
		Size = UDim2.new(0.11, 0, 0.005, 0)
	});
	table.insert(p5.tweens, v6);
	v6:Play();
	local v7 = l__TweenService__5:Create(p5.progressRef:getValue(), TweenInfo.new(p5.durationSeconds, Enum.EasingStyle.Linear), {
		Size = UDim2.new(1, 0, 1, 0)
	});
	table.insert(p5.tweens, v7);
	v7:Play();
	return v5;
end;
function v3.hideProgress(p6)
	local l__tweens__8 = p6.tweens;
	local function v9(p7)
		return p7:Cancel();
	end;
	for v10, v11 in ipairs(l__tweens__8) do
		v9(v11, v10 - 1, l__tweens__8);
	end;
	p6.tweens = {};
	if p6.handle then
		u1.unmount(p6.handle);
	end;
end;
function v3.endClick(p8)
	p8:hideProgress();
	if p8.startedClickTime > 0 then
		if p8.durationSeconds <= tick() - p8.startedClickTime and p8.onComplete ~= nil then
			p8.onComplete();
		end;
		if p8.onPartialComplete ~= nil then
			print("started: " .. tostring(p8.startedClickTime));
			print("duration: " .. tostring(p8.durationSeconds));
			p8.onPartialComplete((tick() - p8.startedClickTime) / p8.durationSeconds);
		end;
	end;
	p8.startedClickTime = -1;
end;
function v3.cancelClick(p9)
	p9.startedClickTime = -1;
	p9:hideProgress();
end;
function v3.disable(p10)
	p10.onComplete = nil;
	p10.onPartialComplete = nil;
	p10.startedClickTime = -1;
	p10:hideProgress();
end;
function v3.setOnComplete(p11, p12)
	p11.onComplete = p12;
end;
function v3.setOnPartialComplete(p13, p14)
	p13.onPartialComplete = p14;
end;
return {
	ClickHold = v3
};
