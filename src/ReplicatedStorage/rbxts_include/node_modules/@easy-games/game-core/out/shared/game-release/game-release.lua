-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v3 = setmetatable({}, {
	__tostring = function()
		return "GameRelease";
	end
});
v3.__index = v3;
function v3.new(...)
	local v4 = setmetatable({}, v3);
	return v4:constructor(...) and v4;
end;
local l__RunService__1 = v2.RunService;
local u2 = v1.import(script, v1.getModule(script, "@rbxts", "make"));
local l__Lighting__3 = v2.Lighting;
function v3.constructor(p1, p2, p3)
	local v5 = nil;
	p1.gameId = p2;
	p1.releaseTime = p3;
	v5 = p2 .. "ReleaseTime";
	if l__RunService__1:IsServer() then
		p1.releaseTimeInstance = u2("NumberValue", {
			Value = p3, 
			Name = v5, 
			Parent = l__Lighting__3
		});
	else
		p1.releaseTimeInstance = l__Lighting__3:WaitForChild(v5);
		p1.releaseTime = p1.releaseTimeInstance.Value;
	end;
	p1.releaseTimeInstance.Changed:Connect(function()
		p1.releaseTime = p1.releaseTimeInstance.Value;
	end);
	task.delay(0, function()
		p1:startCountdown();
	end);
end;
local l__Workspace__4 = v2.Workspace;
local l__GameCoreSharedSyncEvents__5 = v1.import(script, script.Parent.Parent, "game-core-shared-events").GameCoreSharedSyncEvents;
function v3.startCountdown(p4)
	if p4.releaseTime <= l__Workspace__4:GetServerTimeNow() then
		l__GameCoreSharedSyncEvents__5.GameReleaseShowContent:fire(p4.gameId, false);
		p4:onSetupReleasedContent(true);
		return nil;
	end;
	local v6 = p4:onSetupCountdownContent();
	if type(v6) == "function" then
		p4.countdownCleanup = v6;
	end;
	task.wait(1 - (l__Workspace__4:GetServerTimeNow() - math.floor(l__Workspace__4:GetServerTimeNow())));
	while true do
		local v7 = math.max(0, p4.releaseTime - l__Workspace__4:GetServerTimeNow());
		l__GameCoreSharedSyncEvents__5.GameReleaseCountdownTick:fire(p4.gameId, v7, p4.releaseTime);
		if v7 == 0 then
			local l__countdownCleanup__8 = p4.countdownCleanup;
			if l__countdownCleanup__8 ~= nil then
				l__countdownCleanup__8();
			end;
			p4:onSetupReleasedContent(true);
			l__GameCoreSharedSyncEvents__5.GameReleaseShowContent:fire(p4.gameId, true);
			return nil;
		end;
		local v9 = task.wait(1);
		if v9 == 0 then
			break;
		end;
		if v9 ~= v9 then
			break;
		end;
		if not v9 then
			break;
		end;	
	end;
end;
function v3.onCountdownTick(p5, p6)

end;
function v3.onSetupReleasedContent(p7, p8)

end;
function v3.onSetupCountdownContent(p9)

end;
function v3.setReleaseTime(p10, p11)
	p10.releaseTime = p11;
	p10.releaseTimeInstance.Value = p11;
end;
return {
	GameRelease = v3
};
