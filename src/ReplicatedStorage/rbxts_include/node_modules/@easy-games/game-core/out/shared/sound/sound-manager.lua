-- Script Hash: 10d1f1f8b8a60d8e62b44a40bd3dbbad96892bc768085dc46b03a33da63cf5dc380426f6ee2b83da4d8f3867268d8b42
--[[VARIABLE DEFINITION ANOMALY DETECTED, DECOMPILATION OUTPUT POTENTIALLY INCORRECT]]--
-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v3 = setmetatable({}, {
	__tostring = function()
		return "SoundManager";
	end
});
v3.__index = v3;
function v3.new(...)
	local v4 = setmetatable({}, v3);
	return v4:constructor(...) and v4;
end;
function v3.constructor(p1)

end;
function v3.registerSound(p2, p3, p4)
	if p4 == nil then
		p4 = {};
	end;
	local v5 = p4;
	if v5 ~= nil then
		v5 = v5.preload;
	end;
	local v6 = v5;
	if v6 == nil then
		v6 = true;
	end;
	p2.soundConfigs[p3] = p4;
	if v6 then
		table.insert(p2.preloadEntries, {
			assetId = p3, 
			config = p4
		});
	end;
end;
function v3.bulkRegisterSounds(p5, p6)
	for v7, v8 in ipairs(p6) do
		if p5.soundConfigs[v8] == nil then
			p5:registerSound(v8);
		end;
	end;
end;
local u1 = v1.import(script, v1.getModule(script, "@rbxts", "make"));
function v3.createSound(p7, p8)
	local v9 = p7.soundConfigs[p8] or {};
	local v10 = nil;
	if v9.playbackSpeed then
		v10 = v9.playbackSpeed.Min + math.random() * (v9.playbackSpeed.Max - v9.playbackSpeed.Min);
	end;
	local v11 = {
		Name = tostring(p8), 
		SoundId = p8
	};
	local v12 = v9.volume;
	if v12 == nil then
		v12 = 0.5;
	end;
	v11.Volume = v12;
	v11.PlaybackSpeed = v10;
	local v13 = v9.rollOffMaxDistance;
	if v13 == 0 or v13 ~= v13 or not v13 then
		v13 = 60;
	end;
	v11.RollOffMaxDistance = v13;
	v11.RollOffMinDistance = v9.rollOffMinDistance;
	return u1("Sound", v11);
end;
local u2 = v1.import(script, v1.getModule(script, "@rbxts", "object-utils"));
local l__ContentProvider__3 = v2.ContentProvider;
function v3.preload(p9)
	local v14 = u2.values(p9.preloadEntries);
	local function v15(p10)
		return p10.config.preload ~= false;
	end;
	local v16 = {};
	local v17 = 0;
	for v18, v19 in ipairs(v14) do
		if v15(v19, v18 - 1, v14) == true then
			v17 = v17 + 1;
			v16[v17] = v19;
		end;
	end;
	table.sort(v16, function(p11, p12)
		local v20 = p11.config.preloadPriority;
		if v20 == nil then
			v20 = 10;
		end;
		local v21 = p12.config.preloadPriority;
		if v21 == nil then
			v21 = 10;
		end;
		return v20 < v21;
	end);
	local function v22(p13)
		return p9:createSound(p13.assetId);
	end;
	local v23 = {};
	local v24 = 0;
	for v25, v26 in ipairs(v16) do
		local v27 = v22(v26, v25 - 1, v16);
		if v27 ~= nil then
			v24 = v24 + 1;
			v23[v24] = v27;
		end;
	end;
	l__ContentProvider__3:PreloadAsync(v23);
end;
local l__GameQueryUtil__4 = v1.import(script, script.Parent.Parent, "game-world-query", "game-query-util").GameQueryUtil;
function v3.playSound(p14, p15, p16)
	if typeof(p15) == "Instance" then
		local v28 = p15;
	else
		local v29 = p14.soundConfigs[p15];
		if v29 then
			local v30 = {};
			for v31, v32 in pairs(v29) do
				v30[v31] = v32;
			end;
			if type(p16) == "table" then
				for v33, v34 in pairs(p16) do
					v30[v33] = v34;
				end;
			end;
			p16 = v30;
		end;
		v28 = p14:createSound(p15);
	end;
	if not v28 then
		return nil;
	end;
	local v35 = p16;
	if v35 ~= nil then
		v35 = v35.looped;
	end;
	if v35 ~= nil then
		v28.Looped = p16.looped;
	end;
	local v36 = p16;
	if v36 ~= nil then
		v36 = v36.volumeMultiplier;
	end;
	if v36 ~= nil then
		v28.Volume = v28.Volume * p16.volumeMultiplier;
	end;
	local v37 = p16;
	if v37 ~= nil then
		v37 = v37.playbackSpeedMultiplier;
	end;
	if v37 ~= nil then
		v28.PlaybackSpeed = v28.PlaybackSpeed * p16.playbackSpeedMultiplier;
	end;
	local v38 = p16;
	if v38 ~= nil then
		v38 = v38.rollOffMaxDistance;
	end;
	if v38 ~= nil then
		v28.RollOffMaxDistance = p16.rollOffMaxDistance;
	end;
	local v39 = p16;
	if v39 ~= nil then
		v39 = v39.rollOffMinDistsance;
	end;
	if v39 ~= nil then
		v28.RollOffMinDistance = p16.rollOffMinDistsance;
	end;
	local v40 = p16;
	if v40 ~= nil then
		v40 = v40.fadeInTime;
	end;
	if v40 ~= 0 and v40 == v40 and v40 then
		v28.Volume = 0;
		p14:tweenSoundVolume(v28, v28.Volume, p16.fadeInTime);
	end;
	local v41 = p16;
	if v41 ~= nil then
		v41 = v41.fadeOutTime;
	end;
	if v41 ~= 0 and v41 == v41 and v41 then
		task.spawn(function()
			if not v28 then
				return nil;
			end;
			if not v28.IsLoaded then
				v28.Loaded:Wait();
			end;
			local l__TimeLength__42 = v28.TimeLength;
			while true do
				local v43 = task.wait(0.5);
				if v43 == 0 then
					break;
				end;
				if v43 ~= v43 then
					break;
				end;
				if not v43 then
					break;
				end;
				local v44 = v28;
				if v44 ~= nil then
					v44 = v44.IsPlaying;
				end;
				if not v44 then
					break;
				end;
				local v45 = (l__TimeLength__42 - v28.TimePosition) / v28.PlaybackSpeed;
				if v45 <= p16.fadeOutTime then
					p14:tweenSoundVolume(v28, 0, v45);
					return;
				end;			
			end;
		end);
	end;
	local v46 = p16;
	if v46 ~= nil then
		v46 = v46.position;
	end;
	local v47 = v46;
	if not v47 then
		local v48 = p16;
		if v48 ~= nil then
			v48 = v48.parent;
		end;
		v47 = v48;
	end;
	if v47 then
		local v49 = p16;
		if v49 ~= nil then
			v49 = v49.parent;
		end;
		local v50 = v49;
		local v51 = false;
		if not v50 and p16.position then
			v51 = true;
			local v52 = {
				Size = Vector3.new(1, 1, 1)
			};
			local v53 = p16;
			if v53 ~= nil then
				v53 = v53.position;
			end;
			v52.CFrame = CFrame.new(v53);
			v52.Anchored = true;
			v52.CanCollide = false;
			v52.CanQuery = false;
			v52.Transparency = 1;
			v52.Parent = p14.workspaceSoundsFolder;
			v50 = u1("Part", v52);
			l__GameQueryUtil__4:setQueryIgnored(v50);
		end;
		v28.Parent = v50;
		v28.Ended:Connect(function()
			local v54 = nil;
			wait(3);
			if v51 then
				v54 = v50;
				if v54 == nil then
					return;
				end;
			else
				if v28 ~= nil then
					v28:Destroy();
				end;
				return;
			end;
			v54:Destroy();
		end);
	else
		v28.Parent = p14.localSoundsFolder;
		v28.Ended:Connect(function()
			if v28 ~= nil then
				v28:Destroy();
			end;
		end);
	end;
	v28:Play();
	return v28;
end;
local l__TweenService__5 = v2.TweenService;
function v3.tweenSoundVolume(p17, p18, p19, p20, p21)
	local v55 = p21;
	if v55 ~= nil then
		v55 = v55.easingStyle;
	end;
	local v56 = v55;
	if v56 == nil then
		v56 = Enum.EasingStyle.Linear;
	end;
	local v57 = p21;
	if v57 ~= nil then
		v57 = v57.easingDirection;
	end;
	local v58 = v57;
	if v58 == nil then
		v58 = Enum.EasingDirection.In;
	end;
	local v59 = l__TweenService__5:Create(p18, TweenInfo.new(p20, v56, v58), {
		Volume = p19
	});
	v59:Play();
	return v59;
end;
v3.preloadEntries = {};
v3.soundConfigs = {};
v3.workspaceSoundsFolder = u1("Folder", {
	Name = "GameSounds", 
	Parent = v2.Workspace
});
v3.localSoundsFolder = u1("Folder", {
	Name = "GameSounds", 
	Parent = v2.Lighting
});
return {
	SoundManager = v3
};
