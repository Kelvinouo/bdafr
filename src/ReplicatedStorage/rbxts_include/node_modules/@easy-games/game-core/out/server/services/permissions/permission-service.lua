-- Script Hash: 0c5937489b44c4fea66bdd7a3617d53297e23a3ed084541da3527b35730dcf07040caeae2622c0a7e883843b745b2c5f
-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local l__Reflect__2 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Reflect;
local l__Service__3 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Service;
local v4 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "permission", "permissions");
local v5 = setmetatable({}, {
	__tostring = function()
		return "PermissionService";
	end
});
v5.__index = v5;
function v5.new(...)
	local v6 = setmetatable({}, v5);
	return v6:constructor(...) and v6;
end;
local l__Permission__1 = v4.Permission;
function v5.constructor(p1)
	p1.permissions = {
		[22641473] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[87365146] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[225721992] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[75380482] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[20663325] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[21406719] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[4001781] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[4308133] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[1793668872] = { l__Permission__1.ADMIN }, 
		[281575310] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[205430552] = { l__Permission__1.ARTIST, l__Permission__1.FREECAM }, 
		[437492645] = { l__Permission__1.ARTIST, l__Permission__1.FREECAM }, 
		[172603477] = { l__Permission__1.ARTIST, l__Permission__1.FREECAM }, 
		[34466481] = { l__Permission__1.ARTIST, l__Permission__1.FREECAM }, 
		[2237298638] = { l__Permission__1.ARTIST, l__Permission__1.FREECAM }, 
		[78390760] = { l__Permission__1.FREECAM, l__Permission__1.FILMER }, 
		[22808138] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM, l__Permission__1.FILMER, l__Permission__1.ANTICHEAT_MOD }, 
		[1776734677] = { l__Permission__1.FREECAM, l__Permission__1.FILMER }, 
		[48720263] = { l__Permission__1.FREECAM }, 
		[2744943971] = { l__Permission__1.FREECAM }
	};
end;
local l__WatchPlayer__2 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "util", "player-util").WatchPlayer;
local l__RunService__3 = v1.import(script, v1.getModule(script, "@rbxts", "services")).RunService;
function v5.onStart(p2)
	l__WatchPlayer__2(function(p3)
		local v7, v8 = pcall(function()
			local v9 = p3:GetRankInGroup(5774246);
			local v10 = {};
			local v11 = false;
			if v9 <= 150 then
				v11 = v9 >= 100;
			end;
			local v12 = p3:GetRankInGroup(4199740) > 0;
			local v13 = v9 >= 230;
			if l__RunService__3:IsStudio() then
				v13 = true;
			end;
			if v9 == 121 then
				table.insert(v10, l__Permission__1.ANTICHEAT_MOD);
				table.insert(v10, l__Permission__1.FREECAM);
			end;
			if v11 then
				table.insert(v10, l__Permission__1.MOD);
				table.insert(v10, l__Permission__1.FREECAM);
			end;
			if v9 == 160 then
				table.insert(v10, l__Permission__1.ARTIST);
				table.insert(v10, l__Permission__1.ANTICHEAT_MOD);
				table.insert(v10, l__Permission__1.FREECAM);
			end;
			if v12 then
				table.insert(v10, l__Permission__1.STAR_CREATOR);
				table.insert(v10, l__Permission__1.FREECAM);
			end;
			if v9 == 159 then
				table.insert(v10, l__Permission__1.DIRECTOR);
				table.insert(v10, l__Permission__1.ANTICHEAT_MOD);
				table.insert(v10, l__Permission__1.FREECAM);
			end;
			if v13 then
				table.insert(v10, l__Permission__1.ADMIN);
				table.insert(v10, l__Permission__1.FREECAM);
			end;
			if #v10 == 0 then
				return nil;
			end;
			local v14 = p2.permissions[p3.UserId];
			if not v14 then
				local v15 = {};
				table.move(v10, 1, #v10, #v15 + 1, v15);
				p2.permissions[p3.UserId] = v15;
				return;
			end;
			local v16 = {};
			local v17 = #v16;
			local v18 = #v14;
			table.move(v14, 1, v18, v17 + 1, v16);
			table.move(v10, 1, #v10, v17 + v18 + 1, v16);
			p2.permissions[p3.UserId] = v16;
		end);
		if not v7 or not {
			success = true, 
			value = v8
		} then
			local v19 = {
				success = false, 
				error = v8
			};
		end;
	end);
end;
function v5.getPlayerPermissions(p4, p5)
	if typeof(p5) == "Instance" then
		local v20 = p5.UserId;
	else
		v20 = p5;
	end;
	return p4.permissions[v20];
end;
function v5.playerHasPermission(p6, p7, p8)
	local v21 = p6:getPlayerPermissions(p7);
	if v21 == nil then
		return false;
	end;
	return table.find(v21, p8) ~= nil;
end;
function v5.playerHasAllPermissions(p9, p10, p11)
	local v22 = p9:getPlayerPermissions(p10);
	if v22 == nil then
		return false;
	end;
	local function v23(p12)
		return table.find(v22, p12) ~= nil;
	end;
	for v24, v25 in ipairs(p11) do
		if not v23(v25, v24 - 1, p11) then
			return false;
		end;
	end;
	return true;
end;
function v5.playerHasAnyPermission(p13, p14, p15)
	local v26 = p13:getPlayerPermissions(p14);
	if v26 == nil then
		return false;
	end;
	local function v27(p16)
		return table.find(v26, p16) ~= nil;
	end;
	for v28, v29 in ipairs(p15) do
		if v27(v29, v28 - 1, p15) then
			return true;
		end;
	end;
	return false;
end;
local l__PermissionGroupType__4 = v4.PermissionGroupType;
function v5.playerIsInPermissionGroup(p17, p18, p19)
	if p19.type == l__PermissionGroupType__4.ALL then
		return p17:playerHasAllPermissions(p18, p19.permissions);
	end;
	if p19.type == l__PermissionGroupType__4.ANY then
		return p17:playerHasAnyPermission(p18, p19.permissions);
	end;
	if p19.type == l__PermissionGroupType__4.EVERYONE then
		return true;
	end;
	return false;
end;
l__Reflect__2.defineMetadata(v5, "identifier", "@easy-games/game-core:server/services/permissions/permission-service@PermissionService");
l__Reflect__2.defineMetadata(v5, "flamework:implements", { "$:flamework@OnStart" });
l__Reflect__2.decorate(v5, "$:flamework@Service", l__Service__3, { {} });
return {
	PermissionService = v5
};
