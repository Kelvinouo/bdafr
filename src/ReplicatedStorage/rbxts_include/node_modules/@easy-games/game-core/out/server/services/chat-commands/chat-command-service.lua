-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@flamework", "core").out);
local v3 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v4 = v2.Modding.createMetaDecorator("Class");
local v5 = setmetatable({}, {
	__tostring = function()
		return "ChatCommandService";
	end
});
v5.__index = v5;
function v5.new(...)
	local v6 = setmetatable({}, v5);
	return v6:constructor(...) and v6;
end;
local l__GetLuaChatService__1 = v1.import(script, v1.getModule(script, "@rbxts", "chat-service").out).GetLuaChatService;
function v5.constructor(p1)
	p1.luaChatService = l__GetLuaChatService__1();
	p1.chatCommands = {};
end;
local l__Reflect__2 = v2.Reflect;
function v5.onInit(p2)
	for v7, v8 in pairs(l__Reflect__2.objToId) do
		local v9 = l__Reflect__2.getOwnMetadata(v7, "flamework:decorators.@easy-games/game-core:server/services/chat-commands/chat-command-service@ChatCommand");
		if v9 then
			p2.chatCommands[v7] = {
				ctor = v7, 
				metadata = v9, 
				identifier = v8
			};
		end;
	end;
end;
local l__Players__3 = v3.Players;
local l__Flamework__4 = v2.Flamework;
local l__RunService__5 = v3.RunService;
function v5.onStart(p3)
	p3.luaChatService:RegisterProcessCommandsFunction("chat-command-service", function(p4, p5, p6)
		local v10 = nil;
		for v11, v12 in ipairs((l__Players__3:GetPlayers())) do
			if v12.Name == p4 == true then
				v10 = v12;
				break;
			end;
		end;
		if not v10 then
			return nil;
		end;
		if string.sub(p5, 1, 1) ~= "/" then
			return false;
		end;
		local v13 = false;
		local v14 = string.split(string.sub(p5, 2, #p5), " ");
		local v15 = v14[1];
		local v16 = {};
		local v17 = 0;
		local v18, v19, v20 = ipairs(v14);
		while true do
			local v21, v22 = v18(v19, v20);
			if not v21 then
				break;
			end;
			if v21 - 1 > 0 == true then
				v17 = v17 + 1;
				v16[v17] = v22;
			end;		
		end;
		for v23, v24 in pairs(p3.chatCommands) do
			local v25 = l__Reflect__2.objToId[v23];
			if v25 ~= nil then
				local v26 = l__Flamework__4.resolveDependency(v25);
				if v26 ~= nil then
					local v27 = v24.metadata.arguments[1];
					if v27 ~= nil then
						local v28 = false;
						for v29, v30 in ipairs(v27.aliases) do
							if string.lower(v15) == v30 then
								v28 = true;
								break;
							end;
						end;
						if v28 ~= false then
							local v31 = false;
							if l__Flamework__4._implements(v26, "@easy-games/game-core:server/services/chat-commands/chat-command-service@CanUseCommandOverride") then
								v31 = v26:canUseCommandOverride(v10);
							end;
							if not (not v31) or not (not l__RunService__5:IsStudio()) or l__Flamework__4.resolveDependency("@easy-games/game-core:server/services/permissions/permission-service@PermissionService"):playerIsInPermissionGroup(v10, v27.permissionGroup) then
								if l__Flamework__4._implements(v26, "@easy-games/game-core:server/services/chat-commands/chat-command-service@OnCommandRun") then
									v26:onRun(v10, string.lower(v15), unpack(v16));
								end;
								v13 = v27.hidden;
							end;
						end;
					end;
				end;
			end;
		end;
		return v13;
	end);
end;
l__Reflect__2.defineMetadata(v5, "identifier", "@easy-games/game-core:server/services/chat-commands/chat-command-service@ChatCommandService");
l__Reflect__2.defineMetadata(v5, "flamework:implements", { "$:flamework@OnStart", "$:flamework@OnInit" });
l__Reflect__2.decorate(v5, "$:flamework@Service", v2.Service, { {} });
l__Reflect__2.decorate(v5, "$:flamework@External", v2.External, {});
return {
	ChatCommand = v4, 
	ChatCommandService = v5
};
