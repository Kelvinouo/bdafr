-- Script Hash: 0051fb96a7abd0fe6493e1cd7423b6fea856488ee8db3677d8660a2ce36b0445a99ed4603163b0d8605c76fca04b267a
-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@flamework", "core").out);
local v3 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v4 = v2.Modding.createMetaDecorator("Class");
local v5 = setmetatable({}, {
	__tostring = function()
		return "ChatCommandService";
	end
});
v5.__index = v5;
function v5.new(...)
	local v6 = setmetatable({}, v5);
	return v6:constructor(...) and v6;
end;
local l__GetLuaChatService__1 = v1.import(script, v1.getModule(script, "@rbxts", "chat-service").out).GetLuaChatService;
function v5.constructor(p1)
	p1.luaChatService = l__GetLuaChatService__1();
	p1.chatCommands = {};
end;
local l__Reflect__2 = v2.Reflect;
function v5.onInit(p2)
	for v7, v8 in pairs(l__Reflect__2.objToId) do
		local v9 = l__Reflect__2.getOwnMetadata(v7, "flamework:decorators.@easy-games/game-core:server/services/chat-commands/chat-command-service@ChatCommand");
		if v9 then
			p2.chatCommands[v7] = {
				ctor = v7, 
				metadata = v9, 
				identifier = v8
			};
		end;
	end;
end;
local l__Players__3 = v3.Players;
local l__Flamework__4 = v2.Flamework;
local l__RunService__5 = v3.RunService;
function v5.onStart(p3)
	p3.luaChatService:RegisterProcessCommandsFunction("chat-command-service", function(p4, p5, p6)
		local v10 = l__Players__3:GetPlayers();
		local function v11(p7)
			return p7.Name == p4;
		end;
		local v12 = nil;
		for v13, v14 in ipairs(v10) do
			if v11(v14, v13 - 1, v10) == true then
				v12 = v14;
				break;
			end;
		end;
		if not v12 then
			return nil;
		end;
		if string.sub(p5, 1, 1) ~= "/" then
			return false;
		end;
		local v15 = false;
		local v16 = string.split(string.sub(p5, 2, #p5), " ");
		local v17 = v16[1];
		local function v18(p8, p9)
			return p9 > 0;
		end;
		local v19 = {};
		local v20 = 0;
		for v21, v22 in ipairs(v16) do
			if v18(v22, v21 - 1, v16) == true then
				v20 = v20 + 1;
				v19[v20] = v22;
			end;
		end;
		for v23, v24 in pairs(p3.chatCommands) do
			local v25 = l__Reflect__2.objToId[v23];
			if v25 ~= nil then
				local v26 = l__Flamework__4.resolveDependency(v25);
				if v26 ~= nil then
					local v27 = v24.metadata.arguments[1];
					if v27 ~= nil then
						local v28 = false;
						for v29, v30 in ipairs(v27.aliases) do
							if string.lower(v17) == v30 then
								v28 = true;
								break;
							end;
						end;
						if v28 ~= false then
							local v31 = false;
							if l__Flamework__4._implements(v26, "@easy-games/game-core:server/services/chat-commands/chat-command-service@CanUseCommandOverride") then
								v31 = v26:canUseCommandOverride(v12);
							end;
							if not (not v31) or not (not l__RunService__5:IsStudio()) or l__Flamework__4.resolveDependency("@easy-games/game-core:server/services/permissions/permission-service@PermissionService"):playerIsInPermissionGroup(v12, v27.permissionGroup) then
								if l__Flamework__4._implements(v26, "@easy-games/game-core:server/services/chat-commands/chat-command-service@OnCommandRun") then
									v26:onRun(v12, string.lower(v17), unpack(v19));
								end;
								v15 = v27.hidden;
							end;
						end;
					end;
				end;
			end;
		end;
		return v15;
	end);
end;
l__Reflect__2.defineMetadata(v5, "identifier", "@easy-games/game-core:server/services/chat-commands/chat-command-service@ChatCommandService");
l__Reflect__2.defineMetadata(v5, "flamework:implements", { "$:flamework@OnStart", "$:flamework@OnInit" });
l__Reflect__2.decorate(v5, "$:flamework@Service", v2.Service, { {} });
l__Reflect__2.decorate(v5, "$:flamework@External", v2.External, {});
return {
	ChatCommand = v4, 
	ChatCommandService = v5
};
