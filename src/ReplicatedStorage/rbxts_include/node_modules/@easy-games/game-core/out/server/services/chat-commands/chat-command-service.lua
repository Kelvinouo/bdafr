-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@flamework", "core").out);
local v3 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v4 = v2.Modding.createMetaDecorator("Class");
local v5 = setmetatable({}, {
	__tostring = function()
		return "ChatCommandService";
	end
});
v5.__index = v5;
function v5.new(...)
	local v6 = setmetatable({}, v5);
	return v6:constructor(...) and v6;
end;
local l__GetLuaChatService__1 = v1.import(script, v1.getModule(script, "@rbxts", "chat-service").out).GetLuaChatService;
function v5.constructor(p1)
	p1.luaChatService = l__GetLuaChatService__1();
	p1.chatCommands = {};
end;
local l__Reflect__2 = v2.Reflect;
function v5.onInit(p2)
	for v7, v8 in pairs(l__Reflect__2.objToId) do
		local v9 = l__Reflect__2.getOwnMetadata(v7, "flamework:decorators.@easy-games/game-core:server/services/chat-commands/chat-command-service@ChatCommand");
		if v9 then
			p2.chatCommands[v7] = {
				ctor = v7, 
				metadata = v9, 
				identifier = v8
			};
		end;
	end;
end;
local l__Players__3 = v3.Players;
local l__Flamework__4 = v2.Flamework;
local l__RunService__5 = v3.RunService;
function v5.onStart(p3)
	p3.luaChatService:RegisterProcessCommandsFunction("chat-command-service", function(p4, p5, p6)
		local v10 = nil;
		local v11, v12, v13 = ipairs((l__Players__3:GetPlayers()));
		while true do
			v11(v12, v13);
			if not v11 then
				break;
			end;
			v13 = v11;
			if v12.Name == p4 == true then
				v10 = v12;
				break;
			end;		
		end;
		if not v10 then
			return nil;
		end;
		if string.sub(p5, 1, 1) ~= "/" then
			return false;
		end;
		local v14 = false;
		local v15 = string.split(string.sub(p5, 2, #p5), " ");
		local v16 = v15[1];
		local v17 = {};
		local v18 = 0;
		local v19, v20, v21 = ipairs(v15);
		while true do
			v19(v20, v21);
			if not v19 then
				break;
			end;
			if v19 - 1 > 0 == true then
				v18 = v18 + 1;
				v17[v18] = v20;
			end;		
		end;
		for v22, v23 in pairs(p3.chatCommands) do
			local v24 = l__Reflect__2.objToId[v22];
			if v24 ~= nil then
				local v25 = l__Flamework__4.resolveDependency(v24);
				if v25 ~= nil then
					local v26 = v23.metadata.arguments[1];
					if v26 ~= nil then
						local v27 = false;
						local v28, v29, v30 = ipairs(v26.aliases);
						while true do
							v28(v29, v30);
							if not v28 then
								break;
							end;
							v30 = v28;
							if string.lower(v16) == v29 then
								v27 = true;
								break;
							end;						
						end;
						if v27 ~= false then
							local v31 = false;
							if l__Flamework__4._implements(v25, "@easy-games/game-core:server/services/chat-commands/chat-command-service@CanUseCommandOverride") then
								v31 = v25:canUseCommandOverride(v10);
							end;
							if not (not v31) or not (not l__RunService__5:IsStudio()) or l__Flamework__4.resolveDependency("@easy-games/game-core:server/services/permissions/permission-service@PermissionService"):playerIsInPermissionGroup(v10, v26.permissionGroup) then
								if l__Flamework__4._implements(v25, "@easy-games/game-core:server/services/chat-commands/chat-command-service@OnCommandRun") then
									v25:onRun(v10, string.lower(v16), unpack(v17));
								end;
								v14 = v26.hidden;
							end;
						end;
					end;
				end;
			end;
		end;
		return v14;
	end);
end;
l__Reflect__2.defineMetadata(v5, "identifier", "@easy-games/game-core:server/services/chat-commands/chat-command-service@ChatCommandService");
l__Reflect__2.defineMetadata(v5, "flamework:implements", { "$:flamework@OnStart", "$:flamework@OnInit" });
l__Reflect__2.decorate(v5, "$:flamework@Service", v2.Service, { {} });
l__Reflect__2.decorate(v5, "$:flamework@External", v2.External, {});
return {
	ChatCommand = v4, 
	ChatCommandService = v5
};
