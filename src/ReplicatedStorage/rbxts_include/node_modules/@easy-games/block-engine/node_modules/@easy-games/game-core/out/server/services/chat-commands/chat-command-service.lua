-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@flamework", "core").out);
local v3 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v4 = setmetatable({}, {
	__tostring = function()
		return "ChatCommandService";
	end
});
v4.__index = v4;
function v4.new(...)
	local v5 = setmetatable({}, v4);
	return v5:constructor(...) and v5;
end;
local l__GetLuaChatService__1 = v1.import(script, v1.getModule(script, "@rbxts", "chat-service").out).GetLuaChatService;
function v4.constructor(p1)
	p1.luaChatService = l__GetLuaChatService__1();
	p1.chatCommands = {};
end;
local l__Reflect__2 = v2.Reflect;
function v4.onInit(p2)
	for v6, v7 in pairs(l__Reflect__2.objToId) do
		local v8 = l__Reflect__2.getOwnMetadata(v6, "flamework:decorators.@easy-games/game-core:server/services/chat-commands/chat-command-service@ChatCommand");
		if v8 then
			p2.chatCommands[v6] = {
				ctor = v6, 
				metadata = v8, 
				identifier = v7
			};
		end;
	end;
end;
local l__Players__3 = v3.Players;
local l__Flamework__4 = v2.Flamework;
local l__RunService__5 = v3.RunService;
function v4.onStart(p3)
	p3.luaChatService:RegisterProcessCommandsFunction("chat-command-service", function(p4, p5, p6)
		local v9 = nil;
		for v10, v11 in ipairs((l__Players__3:GetPlayers())) do
			if v11.Name == p4 == true then
				v9 = v11;
				break;
			end;
		end;
		if not v9 then
			return nil;
		end;
		if string.sub(p5, 1, 1) ~= "/" then
			return false;
		end;
		local v12 = false;
		local v13 = string.split(string.sub(p5, 2, #p5), " ");
		local v14 = v13[1];
		local v15 = {};
		local v16 = 0;
		local v17, v18, v19 = ipairs(v13);
		while true do
			local v20, v21 = v17(v18, v19);
			if not v20 then
				break;
			end;
			if v20 - 1 > 0 == true then
				v16 = v16 + 1;
				v15[v16] = v21;
			end;		
		end;
		for v22, v23 in pairs(p3.chatCommands) do
			local v24 = l__Reflect__2.objToId[v22];
			if v24 ~= nil then
				local v25 = l__Flamework__4.resolveDependency(v24);
				if v25 ~= nil then
					local v26 = v23.metadata.arguments[1];
					if v26 ~= nil then
						local v27 = false;
						for v28, v29 in ipairs(v26.aliases) do
							if string.lower(v14) == v29 then
								v27 = true;
								break;
							end;
						end;
						if v27 ~= false then
							local v30 = false;
							if l__Flamework__4._implements(v25, "@easy-games/game-core:server/services/chat-commands/chat-command-service@CanUseCommandOverride") then
								v30 = v25:canUseCommandOverride(v9);
							end;
							if not (not v30) or not (not l__RunService__5:IsStudio()) or l__Flamework__4.resolveDependency("@easy-games/game-core:server/services/permissions/permission-service@PermissionService"):playerIsInPermissionGroup(v9, v26.permissionGroup) then
								if l__Flamework__4._implements(v25, "@easy-games/game-core:server/services/chat-commands/chat-command-service@OnCommandRun") then
									v25:onRun(v9, string.lower(v14), unpack(v15));
								end;
								v12 = v26.hidden;
							end;
						end;
					end;
				end;
			end;
		end;
		return v12;
	end);
end;
l__Reflect__2.defineMetadata(v4, "identifier", "@easy-games/game-core:server/services/chat-commands/chat-command-service@ChatCommandService");
l__Reflect__2.defineMetadata(v4, "flamework:isExternal", true);
l__Reflect__2.defineMetadata(v4, "flamework:implements", { "$:flamework@OnStart", "$:flamework@OnInit" });
l__Reflect__2.defineMetadata(v4, "flamework:decorators", { "$:flamework@Service" });
l__Reflect__2.defineMetadata(v4, "flamework:decorators.$:flamework@Service", {
	type = "Service"
});
return {
	ChatCommandService = v4
};
