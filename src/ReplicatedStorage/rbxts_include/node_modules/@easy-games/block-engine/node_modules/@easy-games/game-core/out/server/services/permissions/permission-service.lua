-- Script Hash: b3a06048f69b3c2bb7d113a9c916bc01a1965b6170e128704817ffa2d676ff7b2b0c483eb00695ea63a90f2553b8e2a1
-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local l__Reflect__2 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Reflect;
local v3 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "permission", "permissions");
local v4 = setmetatable({}, {
	__tostring = function()
		return "PermissionService";
	end
});
v4.__index = v4;
function v4.new(...)
	local v5 = setmetatable({}, v4);
	return v5:constructor(...) and v5;
end;
local l__Permission__1 = v3.Permission;
function v4.constructor(p1)
	p1.permissions = {
		[22641473] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[87365146] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[225721992] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[75380482] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[20663325] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[21406719] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[4001781] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[4308133] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM }, 
		[1793668872] = { l__Permission__1.ADMIN }, 
		[205430552] = { l__Permission__1.ARTIST, l__Permission__1.FREECAM }, 
		[437492645] = { l__Permission__1.ARTIST, l__Permission__1.FREECAM }, 
		[172603477] = { l__Permission__1.ARTIST, l__Permission__1.FREECAM }, 
		[34466481] = { l__Permission__1.ARTIST, l__Permission__1.FREECAM }, 
		[2237298638] = { l__Permission__1.ARTIST, l__Permission__1.FREECAM }, 
		[78390760] = { l__Permission__1.FREECAM, l__Permission__1.FILMER }, 
		[22808138] = { l__Permission__1.ADMIN, l__Permission__1.FREECAM, l__Permission__1.FILMER, l__Permission__1.ANTICHEAT_MOD }, 
		[1776734677] = { l__Permission__1.FREECAM, l__Permission__1.FILMER }, 
		[48720263] = { l__Permission__1.FREECAM }, 
		[2744943971] = { l__Permission__1.FREECAM }
	};
end;
local l__WatchPlayer__2 = v1.import(script, script.Parent.Parent.Parent.Parent, "shared", "util", "player-util").WatchPlayer;
local l__RunService__3 = v1.import(script, v1.getModule(script, "@rbxts", "services")).RunService;
function v4.onStart(p2)
	l__WatchPlayer__2(function(p3)
		local v6, v7 = pcall(function()
			local v8 = p3:GetRankInGroup(5774246);
			local v9 = {};
			local v10 = false;
			if v8 <= 150 then
				v10 = v8 >= 100;
			end;
			local v11 = p3:GetRankInGroup(4199740) > 0;
			local v12 = v8 >= 230;
			if l__RunService__3:IsStudio() then
				v12 = true;
			end;
			if v8 == 121 then
				table.insert(v9, l__Permission__1.ANTICHEAT_MOD);
				table.insert(v9, l__Permission__1.FREECAM);
			end;
			if v10 then
				table.insert(v9, l__Permission__1.MOD);
				table.insert(v9, l__Permission__1.FREECAM);
			end;
			if v8 == 160 then
				table.insert(v9, l__Permission__1.ARTIST);
				table.insert(v9, l__Permission__1.ANTICHEAT_MOD);
				table.insert(v9, l__Permission__1.FREECAM);
			end;
			if v11 then
				table.insert(v9, l__Permission__1.STAR_CREATOR);
				table.insert(v9, l__Permission__1.FREECAM);
			end;
			if v8 == 159 then
				table.insert(v9, l__Permission__1.DIRECTOR);
				table.insert(v9, l__Permission__1.ANTICHEAT_MOD);
				table.insert(v9, l__Permission__1.FREECAM);
			end;
			if v12 then
				table.insert(v9, l__Permission__1.ADMIN);
				table.insert(v9, l__Permission__1.FREECAM);
			end;
			if #v9 == 0 then
				return nil;
			end;
			local v13 = p2.permissions[p3.UserId];
			if not v13 then
				local v14 = {};
				table.move(v9, 1, #v9, #v14 + 1, v14);
				p2.permissions[p3.UserId] = v14;
				return;
			end;
			local v15 = {};
			local v16 = #v15;
			local v17 = #v13;
			table.move(v13, 1, v17, v16 + 1, v15);
			table.move(v9, 1, #v9, v16 + v17 + 1, v15);
			p2.permissions[p3.UserId] = v15;
		end);
		if not v6 or not {
			success = true, 
			value = v7
		} then
			local v18 = {
				success = false, 
				error = v7
			};
		end;
	end);
end;
function v4.getPlayerPermissions(p4, p5)
	if typeof(p5) == "Instance" then
		local v19 = p5.UserId;
	else
		v19 = p5;
	end;
	return p4.permissions[v19];
end;
function v4.playerHasPermission(p6, p7, p8)
	local v20 = p6:getPlayerPermissions(p7);
	if v20 == nil then
		return false;
	end;
	return table.find(v20, p8) ~= nil;
end;
function v4.playerHasAllPermissions(p9, p10, p11)
	local v21 = p9:getPlayerPermissions(p10);
	if v21 == nil then
		return false;
	end;
	local function v22(p12)
		return table.find(v21, p12) ~= nil;
	end;
	for v23, v24 in ipairs(p11) do
		if not v22(v24, v23 - 1, p11) then
			return false;
		end;
	end;
	return true;
end;
function v4.playerHasAnyPermission(p13, p14, p15)
	local v25 = p13:getPlayerPermissions(p14);
	if v25 == nil then
		return false;
	end;
	local function v26(p16)
		return table.find(v25, p16) ~= nil;
	end;
	for v27, v28 in ipairs(p15) do
		if v26(v28, v27 - 1, p15) then
			return true;
		end;
	end;
	return false;
end;
local l__PermissionGroupType__4 = v3.PermissionGroupType;
function v4.playerIsInPermissionGroup(p17, p18, p19)
	if p19.type == l__PermissionGroupType__4.ALL then
		return p17:playerHasAllPermissions(p18, p19.permissions);
	end;
	if p19.type == l__PermissionGroupType__4.ANY then
		return p17:playerHasAnyPermission(p18, p19.permissions);
	end;
	if p19.type == l__PermissionGroupType__4.EVERYONE then
		return true;
	end;
	return false;
end;
l__Reflect__2.defineMetadata(v4, "identifier", "@easy-games/game-core:server/services/permissions/permission-service@PermissionService");
l__Reflect__2.defineMetadata(v4, "flamework:isExternal", false);
l__Reflect__2.defineMetadata(v4, "flamework:implements", { "$:flamework@OnStart" });
l__Reflect__2.defineMetadata(v4, "flamework:decorators", { "$:flamework@Service" });
l__Reflect__2.defineMetadata(v4, "flamework:decorators.$:flamework@Service", {
	type = "Service"
});
return {
	PermissionService = v4
};
