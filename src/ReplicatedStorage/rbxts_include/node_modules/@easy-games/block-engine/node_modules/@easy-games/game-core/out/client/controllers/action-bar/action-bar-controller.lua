-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@flamework", "core").out);
local l__Reflect__3 = v2.Reflect;
local v4 = setmetatable({}, {
	__tostring = function()
		return "ActionBarController";
	end
});
v4.__index = v4;
function v4.new(...)
	local v5 = setmetatable({}, v4);
	return v5:constructor(...) and v5;
end;
local u1 = v1.import(script, v1.getModule(script, "@rbxts", "roact").src);
local u2 = v1.import(script, v1.getModule(script, "@rbxts", "signal"));
function v4.constructor(p1)
	p1.childElementOrder = "ascending";
	p1.actionBarRef = u1.createRef();
	p1.actionBarMounted = u2.new();
	p1.childElementQueue = {};
end;
local l__Flamework__3 = v2.Flamework;
function v4.onStart(p2)
	p2.actionBarMounted:Connect(function(p3, p4)
		print("Action bar mounted fired!");
		local l__childElementQueue__6 = p2.childElementQueue;
		local function v7(p5)
			if p5.component then
				print("Mounted a component through queue way...");
				local u4 = u1.mount(p5.component, p4);
				p5.removeMaid:GiveTask(function()
					u1.unmount(u4);
				end);
			elseif p5.uiApp then
				l__Flamework__3.resolveDependency("@easy-games/game-core:client/controllers/app-controller@AppController"):openApp(p5.uiApp.app, p5.uiApp.props, nil, p4);
				p5.removeMaid:GiveTask(function()
					if p5.uiApp then
						l__Flamework__3.resolveDependency("@easy-games/game-core:client/controllers/app-controller@AppController"):closeApp(p5.uiApp.app);
					end;
				end);
			end;
			p2:updateLayoutOrder();
		end;
		for v8, v9 in ipairs(l__childElementQueue__6) do
			v7(v9, v8 - 1, l__childElementQueue__6);
		end;
	end);
	l__Flamework__3.resolveDependency("@easy-games/game-core:client/controllers/action-bar/action-bar-controller@ActionBarController"):mountActionBar({});
end;
local l__ActionBar__5 = v1.import(script, script.Parent, "action-bar").ActionBar;
local l__Players__6 = v1.import(script, v1.getModule(script, "@rbxts", "services")).Players;
function v4.mountActionBar(p6, p7)
	if p6.actionBarTree then
		u1.unmount(p6.actionBarTree);
		p6.actionBarRef = u1.createRef();
	end;
	local v10 = {};
	local v11 = {};
	for v12, v13 in pairs(p7) do
		v11[v12] = v13;
	end;
	v10[#v10 + 1] = u1.createElement(l__ActionBar__5, v11);
	p6.actionBarTree = u1.mount(u1.createFragment({
		ActionBarScreenGui = u1.createElement("ScreenGui", {
			ResetOnSpawn = false
		}, v10)
	}), l__Players__6.LocalPlayer:WaitForChild("PlayerGui"));
	return p6.actionBarTree;
end;
function v4.unmountActionBar(p8)
	if p8.actionBarTree then
		u1.unmount(p8.actionBarTree);
		p8.actionBarRef = u1.createRef();
	end;
end;
local u7 = v1.import(script, v1.getModule(script, "@rbxts", "maid").Maid);
function v4.addApp(p9, p10, p11)
	local v14 = u7.new();
	local v15 = p9.actionBarRef;
	if v15 ~= nil then
		v15 = v15:getValue();
	end;
	if v15 then
		local v16 = l__Flamework__3.resolveDependency("@easy-games/game-core:client/controllers/app-controller@AppController"):openApp(p10, p11, nil, v15);
		p9:updateLayoutOrder();
		return v16;
	end;
	warn("The ActionBar has not been mounted. Make sure you've mounted the ActionBar component from game-core in your game.");
	table.insert(p9.childElementQueue, {
		uiApp = {
			app = p10, 
			props = p11
		}, 
		removeMaid = v14
	});
	v14:GiveTask(function()
		local v17 = {};
		local v18 = 0;
		local v19, v20, v21 = ipairs(p9.childElementQueue);
		while true do
			local v22, v23 = v19(v20, v21);
			if not v22 then
				break;
			end;
			local v24 = v23.uiApp;
			if v24 ~= nil then
				v24 = v24.app;
			end;
			if v24 ~= p10 == true then
				v18 = v18 + 1;
				v17[v18] = v23;
			end;		
		end;
		p9.childElementQueue = v17;
	end);
	return false;
end;
function v4.addComponent(p12, p13)
	local v25 = u7.new();
	local v26 = p12.actionBarRef;
	if v26 ~= nil then
		v26 = v26:getValue();
	end;
	if not v26 then
		warn("The ActionBar has not been mounted. Make sure you've mounted the ActionBar component from game-core in your game.");
		table.insert(p12.childElementQueue, {
			component = p13, 
			removeMaid = v25
		});
		v25:GiveTask(function()
			local v27 = {};
			local v28 = 0;
			local v29, v30, v31 = ipairs(p12.childElementQueue);
			while true do
				local v32, v33 = v29(v30, v31);
				if not v32 then
					break;
				end;
				if v33.component ~= p13 == true then
					v28 = v28 + 1;
					v27[v28] = v33;
				end;			
			end;
			p12.childElementQueue = v27;
		end);
		return v25;
	end;
	print("Mounted a component normal way...");
	local v34 = u1.mount(p13, v26);
	p12:updateLayoutOrder();
	v25:GiveTask(function()
		u1.unmount(v34);
	end);
	return v25;
end;
function v4.waitForActionBarAddComponent(p14, p15)
	local v35 = p14.actionBarRef;
	if v35 ~= nil then
		v35 = v35:getValue();
	end;
	if not v35 then
		p14.actionBarMounted:Wait();
	end;
	return u1.mount(p15, v35);
end;
function v4.updateLayoutOrder(p16)
	local v36 = p16.actionBarRef;
	if v36 ~= nil then
		v36 = v36:getValue();
	end;
	if v36 then
		for v37, v38 in ipairs((v36:GetChildren())) do
			if v38:IsA("GuiObject") then
				if p16.childElementOrder == "ascending" then
					local v39 = -1;
				else
					v39 = 1;
				end;
				v38.LayoutOrder = v39 * (v37 - 1);
			end;
		end;
	end;
end;
l__Reflect__3.defineMetadata(v4, "identifier", "@easy-games/game-core:client/controllers/action-bar/action-bar-controller@ActionBarController");
l__Reflect__3.defineMetadata(v4, "flamework:isExternal", true);
l__Reflect__3.defineMetadata(v4, "flamework:implements", { "$:flamework@OnStart" });
l__Reflect__3.defineMetadata(v4, "flamework:decorators", { "$:flamework@Controller" });
l__Reflect__3.defineMetadata(v4, "flamework:decorators.$:flamework@Controller", {
	type = "Controller"
});
return {
	ActionBarController = v4
};
