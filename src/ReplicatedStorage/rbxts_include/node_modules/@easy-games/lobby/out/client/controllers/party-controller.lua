
-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local l__Reflect__2 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Reflect;
local v3 = v1.import(script, v1.getModule(script, "@rbxts", "services"));
local v4 = setmetatable({}, {
	__tostring = function()
		return "PartyController";
	end
});
v4.__index = v4;
function v4.new(...)
	local v5 = setmetatable({}, v4);
	return v5:constructor(...) and v5;
end;
function v4.constructor(p1)

end;
local l__LobbyClientEvents__1 = v1.import(script, script.Parent.Parent, "events").LobbyClientEvents;
local l__TeleportService__2 = v3.TeleportService;
function v4.onStart(p2)
	l__LobbyClientEvents__1.requestPartyInfo:fire();
	local v6 = l__TeleportService__2:GetLocalPlayerTeleportData();
	if v6 then
		l__LobbyClientEvents__1.lobbyPlayerConnect(v6);
	end;
end;
local l__LobbyClientConfig__3 = v1.import(script, script.Parent.Parent, "config", "lobby-client-config").LobbyClientConfig;
local l__Players__4 = v3.Players;
local l__PartyRole__5 = v1.import(script, script.Parent.Parent.Parent, "shared", "party", "party-role").PartyRole;
function v4.getLocalPartyRole(p3, p4)
	local l__Party__7 = l__LobbyClientConfig__3.store:getState().Party;
	if l__Party__7.leader.userId == l__Players__4.LocalPlayer.UserId then
		return l__PartyRole__5.LEADER;
	end;
	local l__members__8 = l__Party__7.members;
	local function v9(p5)
		return p5.userId == p4.userId;
	end;
	local v10 = nil;
	for v11, v12 in ipairs(l__members__8) do
		if v9(v12, v11 - 1, l__members__8) == true then
			v10 = v12;
			break;
		end;
	end;
	if v10 ~= nil then
		return l__PartyRole__5.MEMBER;
	end;
	return l__PartyRole__5.NONE;
end;
function v4.getLocalPartyPlayers(p6)
	local v13 = { l__LobbyClientConfig__3.store:getState().Party.leader };
	local l__members__14 = l__LobbyClientConfig__3.store:getState().Party.members;
	table.move(l__members__14, 1, #l__members__14, #v13 + 1, v13);
	return v13;
end;
function v4.isInLocalParty(p7, p8)
	local v15 = p7:getLocalPartyPlayers();
	local function v16(p9)
		return p9.userId == p8.UserId;
	end;
	local v17 = nil;
	for v18, v19 in ipairs(v15) do
		if v16(v19, v18 - 1, v15) == true then
			v17 = v19;
			break;
		end;
	end;
	return v17 ~= nil;
end;
function v4.invitePlayer(p10, p11)
	l__LobbyClientEvents__1.inviteToParty({
		player = p11
	});
end;
function v4.removePlayer(p12, p13)
	l__LobbyClientEvents__1.removeFromParty({
		player = p13
	});
end;
function v4.leaveParty(p14)
	l__LobbyClientEvents__1.leaveParty();
end;
function v4.joinParty(p15, p16)
	local v20 = l__Players__4:GetPlayerByUserId(p16);
	if not v20 then
		return false;
	end;
	l__LobbyClientEvents__1.joinParty({
		leader = v20
	});
	return true;
end;
l__Reflect__2.defineMetadata(v4, "identifier", "@easy-games/lobby:client/controllers/party-controller@PartyController");
l__Reflect__2.defineMetadata(v4, "flamework:isExternal", true);
l__Reflect__2.defineMetadata(v4, "flamework:implements", { "$:flamework@OnStart" });
l__Reflect__2.defineMetadata(v4, "flamework:decorators", { "$:flamework@Controller" });
l__Reflect__2.defineMetadata(v4, "flamework:decorators.$:flamework@Controller", {
	type = "Controller"
});
return {
	PartyController = v4
};

