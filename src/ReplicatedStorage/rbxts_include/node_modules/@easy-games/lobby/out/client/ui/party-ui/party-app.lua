-- Script Hash: 89c4af40077d8cdf11ea1dd4a7054dd025f13a3ed43a09118414c2cde45d31a69371ec2684e1f8ca4b4ee29b04b987f3
-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@easy-games", "game-core").out);
local v3 = v1.import(script, v1.getModule(script, "@rbxts", "roact").src);
local v4 = v3.Component:extend("PartyAppBase");
function v4.init(p1, p2)
	p1:setState({
		FriendIds = {}, 
		AllUsers = {}
	});
end;
local l__DeviceUtil__1 = v2.DeviceUtil;
local l__OfflinePlayerUtil__2 = v2.OfflinePlayerUtil;
local l__Players__3 = v1.import(script, v1.getModule(script, "@rbxts", "services")).Players;
local l__SetUtil__4 = v1.import(script, v1.getModule(script, "@easy-games", "data-structure").out).SetUtil;
function v4.getSuggestedPlayers(p3)
	if l__DeviceUtil__1.isHoarceKat() then
		local v5 = { l__OfflinePlayerUtil__2.Dummy.SnickTrix, l__OfflinePlayerUtil__2.Dummy.spleenhook, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99 };
		local function v6(p4)
			local v7 = {};
			for v8, v9 in pairs(p4) do
				v7[v8] = v9;
			end;
			v7.displayName = p4.name;
			return v7;
		end;
		local v10 = table.create(#v5);
		for v11, v12 in ipairs(v5) do
			v10[v11] = v6(v12, v11 - 1, v5);
		end;
		return v10;
	end;
	local v13 = l__Players__3:GetPlayers();
	local function v14(p5)
		return p5 ~= l__Players__3.LocalPlayer;
	end;
	local v15 = {};
	local v16 = 0;
	for v17, v18 in ipairs(v13) do
		if v14(v18, v17 - 1, v13) == true then
			v16 = v16 + 1;
			v15[v16] = v18;
		end;
	end;
	local function v19(p6)
		return {
			name = p6.Name, 
			userId = p6.UserId, 
			displayName = p6.DisplayName
		};
	end;
	local v20 = table.create(#v15);
	for v21, v22 in ipairs(v15) do
		v20[v21] = v19(v22, v21 - 1, v15);
	end;
	v1.Promise.try(function()
		local v23 = {};
		local v24 = {};
		for v25, v26 in ipairs(v20) do
			if p3.state.AllUsers[v26.userId] == nil then
				v24[#v24 + 1] = v26.userId;
				if l__Players__3.LocalPlayer:IsFriendsWith(v26.userId) then
					v23[#v23 + 1] = v26.userId;
				end;
			end;
		end;
		return {
			friends = v23, 
			allUsers = v24
		};
	end):andThen(function(p7)
		local v27 = {};
		local v28 = {};
		local v29 = #v28;
		local v30 = l__SetUtil__4.values(p3.state.AllUsers);
		local v31 = #v30;
		table.move(v30, 1, v31, v29 + 1, v28);
		local l__allUsers__32 = p7.allUsers;
		table.move(l__allUsers__32, 1, #l__allUsers__32, v29 + v31 + 1, v28);
		for v33, v34 in ipairs(v28) do
			v27[v34] = true;
		end;
		local v35 = {};
		local v36 = {};
		local v37 = #v36;
		local v38 = l__SetUtil__4.values(p3.state.FriendIds);
		local v39 = #v38;
		table.move(v38, 1, v39, v37 + 1, v36);
		local l__friends__40 = p7.friends;
		table.move(l__friends__40, 1, #l__friends__40, v37 + v39 + 1, v36);
		for v41, v42 in ipairs(v36) do
			v35[v42] = true;
		end;
		p3:setState({
			FriendIds = v35, 
			AllUsers = v27
		});
	end);
	local v43 = {};
	local v44 = #v43;
	local function v45(p8)
		return p3.state.FriendIds[p8.userId] ~= nil;
	end;
	local v46 = {};
	local v47 = 0;
	for v48, v49 in ipairs(v20) do
		if v45(v49, v48 - 1, v20) == true then
			v47 = v47 + 1;
			v46[v47] = v49;
		end;
	end;
	local v50 = #v46;
	table.move(v46, 1, v50, v44 + 1, v43);
	local function v51(p9)
		return p3.state.FriendIds[p9.userId] == nil;
	end;
	local v52 = {};
	local v53 = 0;
	for v54, v55 in ipairs(v20) do
		if v51(v55, v54 - 1, v20) == true then
			v53 = v53 + 1;
			v52[v53] = v55;
		end;
	end;
	table.move(v52, 1, #v52, v44 + v50 + 1, v43);
	return v43;
end;
local l__DarkBackground__5 = v2.DarkBackground;
local l__SlideIn__6 = v2.SlideIn;
local l__PartyCard__7 = v1.import(script, script.Parent, "party-card").PartyCard;
local l__Flamework__8 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Flamework;
function v4.render(p10)
	local v56 = {
		DisplayOrder = 20
	};
	local l__ScreenGuiProps__57 = p10.props.ScreenGuiProps;
	if type(l__ScreenGuiProps__57) == "table" then
		for v58, v59 in pairs(l__ScreenGuiProps__57) do
			v56[v58] = v59;
		end;
	end;
	local v60 = {};
	for v61, v62 in pairs(v56) do
		v60[v61] = v62;
	end;
	local v63 = {};
	local v64 = {};
	local v65 = {};
	function v65.OnMinimize()
		return l__Flamework__8.resolveDependency("@easy-games/game-core:client/controllers/app-controller@AppController"):closeApp(p10.props.AppId);
	end;
	function v65.InvitePlayer(p11)
		return p10.props:invitePlayer(p11);
	end;
	function v65.RemovePlayer(p12)
		return p10.props:removePlayer(p12);
	end;
	function v65.LeaveParty()
		return p10.props:leaveParty();
	end;
	function v65.GetSuggestedPlayers()
		return p10:getSuggestedPlayers();
	end;
	v65.appId = p10.props.AppId;
	v64[1] = v3.createElement(l__PartyCard__7, v65);
	v63[1] = v3.createElement(l__DarkBackground__5, {
		AppId = p10.props.AppId
	});
	v63[2] = v3.createElement(l__SlideIn__6, {}, v64);
	return v3.createElement("ScreenGui", v60, v63);
end;
return {
	PartyApp = v1.import(script, v1.getModule(script, "@rbxts", "roact-rodux").src).connect(function(p13, p14)
		local v66 = {};
		for v67, v68 in pairs(p14) do
			v66[v67] = v68;
		end;
		return v66;
	end, function(p15)
		return {
			invitePlayer = function(p16, p17)
				local v69 = l__OfflinePlayerUtil__2.getPlayer(p17);
				if v69 then
					l__Flamework__8.resolveDependency("@easy-games/lobby:client/controllers/party-controller@PartyController"):invitePlayer(v69);
				end;
			end, 
			removePlayer = function(p18, p19)
				local v70 = l__OfflinePlayerUtil__2.getPlayer(p19);
				if v70 then
					l__Flamework__8.resolveDependency("@easy-games/lobby:client/controllers/party-controller@PartyController"):removePlayer(v70);
				end;
			end, 
			leaveParty = function(p20)
				l__Flamework__8.resolveDependency("@easy-games/lobby:client/controllers/party-controller@PartyController"):leaveParty();
			end
		};
	end)(v4)
};
