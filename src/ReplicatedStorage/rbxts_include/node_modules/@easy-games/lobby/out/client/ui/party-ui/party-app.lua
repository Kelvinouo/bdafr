-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@easy-games", "game-core").out);
local v3 = v1.import(script, v1.getModule(script, "@rbxts", "roact").src);
local v4 = v3.Component:extend("PartyAppBase");
function v4.init(p1, p2)
	p1:setState({
		FriendIds = {}, 
		AllUsers = {}
	});
end;
local l__DeviceUtil__1 = v2.DeviceUtil;
local l__OfflinePlayerUtil__2 = v2.OfflinePlayerUtil;
local l__Players__3 = v1.import(script, v1.getModule(script, "@rbxts", "services")).Players;
local l__SetUtil__4 = v1.import(script, v1.getModule(script, "@easy-games", "data-structure").out).SetUtil;
function v4.getSuggestedPlayers(p3)
	if l__DeviceUtil__1.isHoarceKat() then
		local v5 = { l__OfflinePlayerUtil__2.Dummy.SnickTrix, l__OfflinePlayerUtil__2.Dummy.spleenhook, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99 };
		local v6 = table.create(#v5);
		local v7, v8, v9 = ipairs(v5);
		while true do
			v7(v8, v9);
			if not v7 then
				break;
			end;
			v9 = v7;
			local v10 = {};
			for v11, v12 in pairs(v8) do
				v10[v11] = v12;
			end;
			v10.displayName = v8.name;
			v6[v7] = v10;		
		end;
		return v6;
	end;
	local v13 = {};
	local v14 = 0;
	local v15, v16, v17 = ipairs((l__Players__3:GetPlayers()));
	while true do
		v15(v16, v17);
		if not v15 then
			break;
		end;
		if v16 ~= l__Players__3.LocalPlayer == true then
			v14 = v14 + 1;
			v13[v14] = v16;
		end;	
	end;
	local v18 = table.create(#v13);
	local v19, v20, v21 = ipairs(v13);
	while true do
		v19(v20, v21);
		if not v19 then
			break;
		end;
		v21 = v19;
		v18[v19] = {
			name = v20.Name, 
			userId = v20.UserId, 
			displayName = v20.DisplayName
		};	
	end;
	v1.Promise.try(function()
		local v22 = {};
		local v23 = {};
		local v24, v25, v26 = ipairs(v18);
		while true do
			v24(v25, v26);
			if not v24 then
				break;
			end;
			v26 = v24;
			if p3.state.AllUsers[v25.userId] == nil then
				v23[#v23 + 1] = v25.userId;
				if l__Players__3.LocalPlayer:IsFriendsWith(v25.userId) then
					v22[#v22 + 1] = v25.userId;
				end;
			end;		
		end;
		return {
			friends = v22, 
			allUsers = v23
		};
	end):andThen(function(p4)
		local v27 = {};
		local v28 = {};
		local v29 = #v28;
		local v30 = l__SetUtil__4.values(p3.state.AllUsers);
		local v31 = #v30;
		table.move(v30, 1, v31, v29 + 1, v28);
		local l__allUsers__32 = p4.allUsers;
		table.move(l__allUsers__32, 1, #l__allUsers__32, v29 + v31 + 1, v28);
		local v33, v34, v35 = ipairs(v28);
		while true do
			v33(v34, v35);
			if not v33 then
				break;
			end;
			v35 = v33;
			v27[v34] = true;		
		end;
		local v36 = {};
		local v37 = {};
		local v38 = #v37;
		local v39 = l__SetUtil__4.values(p3.state.FriendIds);
		local v40 = #v39;
		table.move(v39, 1, v40, v38 + 1, v37);
		local l__friends__41 = p4.friends;
		table.move(l__friends__41, 1, #l__friends__41, v38 + v40 + 1, v37);
		local v42, v43, v44 = ipairs(v37);
		while true do
			v42(v43, v44);
			if not v42 then
				break;
			end;
			v44 = v42;
			v36[v43] = true;		
		end;
		p3:setState({
			FriendIds = v36, 
			AllUsers = v27
		});
	end);
	local v45 = {};
	local v46 = #v45;
	local v47 = {};
	local v48 = 0;
	local v49, v50, v51 = ipairs(v18);
	while true do
		v49(v50, v51);
		if not v49 then
			break;
		end;
		if p3.state.FriendIds[v50.userId] ~= nil == true then
			v48 = v48 + 1;
			v47[v48] = v50;
		end;	
	end;
	local v52 = #v47;
	table.move(v47, 1, v52, v46 + 1, v45);
	local v53 = {};
	local v54 = 0;
	local v55, v56, v57 = ipairs(v18);
	while true do
		v55(v56, v57);
		if not v55 then
			break;
		end;
		if p3.state.FriendIds[v56.userId] == nil == true then
			v54 = v54 + 1;
			v53[v54] = v56;
		end;	
	end;
	table.move(v53, 1, #v53, v46 + v52 + 1, v45);
	return v45;
end;
local l__DarkBackground__5 = v2.DarkBackground;
local l__SlideIn__6 = v2.SlideIn;
local l__PartyCard__7 = v1.import(script, script.Parent, "party-card").PartyCard;
local l__Flamework__8 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Flamework;
function v4.render(p5)
	local v58 = {
		DisplayOrder = 20
	};
	local l__ScreenGuiProps__59 = p5.props.ScreenGuiProps;
	if type(l__ScreenGuiProps__59) == "table" then
		for v60, v61 in pairs(l__ScreenGuiProps__59) do
			v58[v60] = v61;
		end;
	end;
	local v62 = {};
	for v63, v64 in pairs(v58) do
		v62[v63] = v64;
	end;
	local v65 = {};
	local v66 = {};
	local v67 = {};
	function v67.OnMinimize()
		return l__Flamework__8.resolveDependency("@easy-games/game-core:client/controllers/app-controller@AppController"):closeApp(p5.props.AppId);
	end;
	function v67.InvitePlayer(p6)
		return p5.props:invitePlayer(p6);
	end;
	function v67.RemovePlayer(p7)
		return p5.props:removePlayer(p7);
	end;
	function v67.LeaveParty()
		return p5.props:leaveParty();
	end;
	function v67.GetSuggestedPlayers()
		return p5:getSuggestedPlayers();
	end;
	v67.appId = p5.props.AppId;
	v66[1] = v3.createElement(l__PartyCard__7, v67);
	v65[1] = v3.createElement(l__DarkBackground__5, {
		AppId = p5.props.AppId
	});
	v65[2] = v3.createElement(l__SlideIn__6, {}, v66);
	return v3.createElement("ScreenGui", v62, v65);
end;
return {
	PartyApp = v1.import(script, v1.getModule(script, "@rbxts", "roact-rodux").src).connect(function(p8, p9)
		local v68 = {};
		for v69, v70 in pairs(p9) do
			v68[v69] = v70;
		end;
		return v68;
	end, function(p10)
		return {
			invitePlayer = function(p11, p12)
				local v71 = l__OfflinePlayerUtil__2.getPlayer(p12);
				if v71 then
					l__Flamework__8.resolveDependency("@easy-games/lobby:client/controllers/party-controller@PartyController"):invitePlayer(v71);
				end;
			end, 
			removePlayer = function(p13, p14)
				local v72 = l__OfflinePlayerUtil__2.getPlayer(p14);
				if v72 then
					l__Flamework__8.resolveDependency("@easy-games/lobby:client/controllers/party-controller@PartyController"):removePlayer(v72);
				end;
			end, 
			leaveParty = function(p15)
				l__Flamework__8.resolveDependency("@easy-games/lobby:client/controllers/party-controller@PartyController"):leaveParty();
			end
		};
	end)(v4)
};
