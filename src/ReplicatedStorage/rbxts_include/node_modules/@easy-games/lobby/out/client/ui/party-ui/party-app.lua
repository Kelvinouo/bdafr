-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, v1.getModule(script, "@easy-games", "game-core").out);
local v3 = v1.import(script, v1.getModule(script, "@rbxts", "roact").src);
local v4 = v3.Component:extend("PartyAppBase");
function v4.init(p1, p2)
	p1:setState({
		FriendIds = {}, 
		AllUsers = {}
	});
end;
local l__DeviceUtil__1 = v2.DeviceUtil;
local l__OfflinePlayerUtil__2 = v2.OfflinePlayerUtil;
local l__Players__3 = v1.import(script, v1.getModule(script, "@rbxts", "services")).Players;
local l__SetUtil__4 = v1.import(script, v1.getModule(script, "@easy-games", "data-structure").out).SetUtil;
function v4.getSuggestedPlayers(p3)
	if l__DeviceUtil__1.isHoarceKat() then
		local v5 = { l__OfflinePlayerUtil__2.Dummy.SnickTrix, l__OfflinePlayerUtil__2.Dummy.spleenhook, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99, l__OfflinePlayerUtil__2.Dummy.grilme99 };
		local v6 = table.create(#v5);
		for v7, v8 in ipairs(v5) do
			local v9 = {};
			for v10, v11 in pairs(v8) do
				v9[v10] = v11;
			end;
			v9.displayName = v8.name;
			v6[v7] = v9;
		end;
		return v6;
	end;
	local v12 = {};
	local v13 = 0;
	local v14, v15, v16 = ipairs((l__Players__3:GetPlayers()));
	while true do
		local v17, v18 = v14(v15, v16);
		if not v17 then
			break;
		end;
		if v18 ~= l__Players__3.LocalPlayer == true then
			v13 = v13 + 1;
			v12[v13] = v18;
		end;	
	end;
	local v19 = table.create(#v12);
	for v20, v21 in ipairs(v12) do
		v19[v20] = {
			name = v21.Name, 
			userId = v21.UserId, 
			displayName = v21.DisplayName
		};
	end;
	v1.Promise.try(function()
		local v22 = {};
		local v23 = {};
		for v24, v25 in ipairs(v19) do
			if p3.state.AllUsers[v25.userId] == nil then
				v23[#v23 + 1] = v25.userId;
				if l__Players__3.LocalPlayer:IsFriendsWith(v25.userId) then
					v22[#v22 + 1] = v25.userId;
				end;
			end;
		end;
		return {
			friends = v22, 
			allUsers = v23
		};
	end):andThen(function(p4)
		local v26 = {};
		local v27 = {};
		local v28 = #v27;
		local v29 = l__SetUtil__4.values(p3.state.AllUsers);
		local v30 = #v29;
		table.move(v29, 1, v30, v28 + 1, v27);
		local l__allUsers__31 = p4.allUsers;
		table.move(l__allUsers__31, 1, #l__allUsers__31, v28 + v30 + 1, v27);
		for v32, v33 in ipairs(v27) do
			v26[v33] = true;
		end;
		local v34 = {};
		local v35 = {};
		local v36 = #v35;
		local v37 = l__SetUtil__4.values(p3.state.FriendIds);
		local v38 = #v37;
		table.move(v37, 1, v38, v36 + 1, v35);
		local l__friends__39 = p4.friends;
		table.move(l__friends__39, 1, #l__friends__39, v36 + v38 + 1, v35);
		for v40, v41 in ipairs(v35) do
			v34[v41] = true;
		end;
		p3:setState({
			FriendIds = v34, 
			AllUsers = v26
		});
	end);
	local v42 = {};
	local v43 = #v42;
	local v44 = {};
	local v45 = 0;
	local v46, v47, v48 = ipairs(v19);
	while true do
		local v49, v50 = v46(v47, v48);
		if not v49 then
			break;
		end;
		if p3.state.FriendIds[v50.userId] ~= nil == true then
			v45 = v45 + 1;
			v44[v45] = v50;
		end;	
	end;
	local v51 = #v44;
	table.move(v44, 1, v51, v43 + 1, v42);
	local v52 = {};
	local v53 = 0;
	local v54, v55, v56 = ipairs(v19);
	while true do
		local v57, v58 = v54(v55, v56);
		if not v57 then
			break;
		end;
		if p3.state.FriendIds[v58.userId] == nil == true then
			v53 = v53 + 1;
			v52[v53] = v58;
		end;	
	end;
	table.move(v52, 1, #v52, v43 + v51 + 1, v42);
	return v42;
end;
local l__DarkBackground__5 = v2.DarkBackground;
local l__SlideIn__6 = v2.SlideIn;
local l__PartyCard__7 = v1.import(script, script.Parent, "party-card").PartyCard;
local l__Flamework__8 = v1.import(script, v1.getModule(script, "@flamework", "core").out).Flamework;
function v4.render(p5)
	local v59 = {
		DisplayOrder = 20
	};
	local l__ScreenGuiProps__60 = p5.props.ScreenGuiProps;
	if type(l__ScreenGuiProps__60) == "table" then
		for v61, v62 in pairs(l__ScreenGuiProps__60) do
			v59[v61] = v62;
		end;
	end;
	local v63 = {};
	for v64, v65 in pairs(v59) do
		v63[v64] = v65;
	end;
	local v66 = {};
	local v67 = {};
	local v68 = {};
	function v68.OnMinimize()
		return l__Flamework__8.resolveDependency("@easy-games/game-core:client/controllers/app-controller@AppController"):closeApp(p5.props.AppId);
	end;
	function v68.InvitePlayer(p6)
		return p5.props:invitePlayer(p6);
	end;
	function v68.RemovePlayer(p7)
		return p5.props:removePlayer(p7);
	end;
	function v68.LeaveParty()
		return p5.props:leaveParty();
	end;
	function v68.GetSuggestedPlayers()
		return p5:getSuggestedPlayers();
	end;
	v68.appId = p5.props.AppId;
	v67[1] = v3.createElement(l__PartyCard__7, v68);
	v66[1] = v3.createElement(l__DarkBackground__5, {
		AppId = p5.props.AppId
	});
	v66[2] = v3.createElement(l__SlideIn__6, {}, v67);
	return v3.createElement("ScreenGui", v63, v66);
end;
return {
	PartyApp = v1.import(script, v1.getModule(script, "@rbxts", "roact-rodux").src).connect(function(p8, p9)
		local v69 = {};
		for v70, v71 in pairs(p9) do
			v69[v70] = v71;
		end;
		return v69;
	end, function(p10)
		return {
			invitePlayer = function(p11, p12)
				local v72 = l__OfflinePlayerUtil__2.getPlayer(p12);
				if v72 then
					l__Flamework__8.resolveDependency("@easy-games/lobby:client/controllers/party-controller@PartyController"):invitePlayer(v72);
				end;
			end, 
			removePlayer = function(p13, p14)
				local v73 = l__OfflinePlayerUtil__2.getPlayer(p14);
				if v73 then
					l__Flamework__8.resolveDependency("@easy-games/lobby:client/controllers/party-controller@PartyController"):removePlayer(v73);
				end;
			end, 
			leaveParty = function(p15)
				l__Flamework__8.resolveDependency("@easy-games/lobby:client/controllers/party-controller@PartyController"):leaveParty();
			end
		};
	end)(v4)
};
