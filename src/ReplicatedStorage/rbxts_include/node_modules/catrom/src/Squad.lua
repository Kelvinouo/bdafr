-- Decompiled with the Synapse X Luau decompiler.

local function u1(p1, p2, p3, p4, p5, p6, p7, p8)
	local v1 = p1 * p5 + p2 * p6 + p3 * p7 + p4 * p8;
	local v2 = p1 * p6 - p2 * p5 + p3 * p8 - p4 * p7;
	local v3 = p1 * p7 - p2 * p8 - p3 * p5 + p4 * p6;
	local v4 = p1 * p8 + p2 * p7 - p3 * p6 - p4 * p5;
	local v5 = math.sqrt(v2 ^ 2 + v3 ^ 2 + v4 ^ 2);
	if v5 > 0.0001 then
		local v6 = math.atan2(v5, v1) / (4 * v5) or 0.38095238095238093 + v1 * (-0.19285714285714287 + v1 * (0.0761904761904762 - v1 / 70));
	else
		v6 = 0.38095238095238093 + v1 * (-0.19285714285714287 + v1 * (0.0761904761904762 - v1 / 70));
	end;
	return v2 * v6, v3 * v6, v4 * v6;
end;
local function u2(p9)
	local v7 = nil;
	local v8 = nil;
	local v9 = nil;
	local v10 = nil;
	local v11 = nil;
	local v12 = nil;
	local v13 = nil;
	local v14 = nil;
	local v15 = nil;
	local v16 = nil;
	local v17 = nil;
	local v18 = nil;
	v13, v14, v15, v16, v12, v9, v11, v17, v8, v10, v7, v18 = p9:GetComponents();
	local v19 = v16 + v17 + v18;
	if v19 > 0 then
		local v20 = math.sqrt(1 + v19);
		local v21 = 0.5 / v20;
		local v22 = table.create(4);
		v22[1] = v20 / 2;
		v22[2] = (v7 - v8) * v21;
		v22[3] = (v9 - v10) * v21;
		v22[4] = (v11 - v12) * v21;
		return v22;
	end;
	local v23 = math.max(v16, v17, v18);
	if v23 == v16 then
		local v24 = math.sqrt(1 + v16 - v17 - v18);
		local v25 = 0.5 / v24;
		local v26 = table.create(4);
		v26[1] = (v7 - v8) * v25;
		v26[2] = v24 / 2;
		v26[3] = (v11 + v12) * v25;
		v26[4] = (v9 + v10) * v25;
		return v26;
	end;
	if v23 == v17 then
		local v27 = math.sqrt(1 - v16 + v17 - v18);
		local v28 = 0.5 / v27;
		local v29 = table.create(4);
		v29[1] = (v9 - v10) * v28;
		v29[2] = (v11 + v12) * v28;
		v29[3] = v27 / 2;
		v29[4] = (v7 + v8) * v28;
		return v29;
	end;
	if v23 ~= v18 then
		return table.create(4, nil);
	end;
	local v30 = math.sqrt(1 - v16 - v17 + v18);
	local v31 = 0.5 / v30;
	local v32 = table.create(4);
	v32[1] = (v11 - v12) * v31;
	v32[2] = (v9 + v10) * v31;
	v32[3] = (v7 + v8) * v31;
	v32[4] = v30 / 2;
	return v32;
end;
local function u3(p10, p11, p12, p13, p14, p15, p16, p17, p18, p19, p20, p21)
	if p10 * p14 + p11 * p15 + p12 * p16 + p13 * p17 < 0 then
		p10 = -p10;
		p11 = -p11;
		p12 = -p12;
		p13 = -p13;
	end;
	if p18 * p14 + p19 * p15 + p20 * p16 + p21 * p17 < 0 then
		p18 = -p18;
		p19 = -p19;
		p20 = -p20;
		p21 = -p21;
	end;
	local v33, v34, v35 = u1(p10, p11, p12, p13, p14, p15, p16, p17);
	local v36, v37, v38 = u1(p18, p19, p20, p21, p14, p15, p16, p17);
	local v39 = v33 + v36;
	local v40 = v34 + v37;
	local v41 = v35 + v38;
	local v42 = math.sqrt(v39 * v39 + v40 * v40 + v41 * v41);
	local v43 = v42 > 0.0001 and math.sin(v42) / v42 or 1 + v42 * v42 * (v42 * v42 / 120 - 0.16666666666666666);
	local v44 = math.cos(v42);
	local v45 = v43 * v39;
	local v46 = v43 * v40;
	local v47 = v43 * v41;
	return v44 * p14 - v45 * p15 - v46 * p16 - v47 * p17, v45 * p14 + v44 * p15 - v47 * p16 + v46 * p17, v46 * p14 + v47 * p15 + v44 * p16 - v45 * p17, v47 * p14 - v46 * p15 + v45 * p16 + v44 * p17;
end;
local function u4(p22, p23, p24, p25, p26, p27, p28, p29, p30, p31)
	if p31 < 0.9999 then
		local v48 = math.atan2(math.sqrt((p25 * p28 + p23 * p30 - p24 * p29 - p26 * p27) ^ 2 + (p25 * p27 - p23 * p29 + p26 * p28 - p24 * p30) ^ 2 + (p25 * p30 - p23 * p28 - p26 * p29 + p24 * p27) ^ 2), p31);
		local v49 = math.sqrt(1 - p31 * p31);
		local v50 = math.sin((1 - p22) * v48) / v49;
		local v51 = math.sin(p22 * v48) / v49;
	else
		v50 = 1 - p22;
		v51 = p22;
	end;
	return p23 * v50 + p27 * v51, p24 * v50 + p28 * v51, p25 * v50 + p29 * v51, p26 * v50 + p30 * v51;
end;
return function(p32, p33, p34, p35, p36)
	local v52 = u2(p32);
	local v53 = u2(p33);
	local v54 = u2(p34);
	local v55 = u2(p35);
	local v56 = v53[1];
	local v57 = v53[2];
	local v58 = v53[3];
	local v59 = v53[4];
	local v60 = v54[1];
	local v61 = v54[2];
	local v62 = v54[3];
	local v63 = v54[4];
	local v64, v65, v66, v67 = u3(v52[1], v52[2], v52[3], v52[4], v56, v57, v58, v59, v60, v61, v62, v63);
	local v68, v69, v70, v71 = u3(v56, v57, v58, v59, v60, v61, v62, v63, v55[1], v55[2], v55[3], v55[4]);
	local v72 = v56 * v60 + v57 * v61 + v58 * v62 + v59 * v63;
	local v73 = math.abs(v64 * v68 + v65 * v69 + v66 * v70 + v67 * v71);
	if v72 < 0 then
		v68 = -v68;
		v69 = -v69;
		v70 = -v70;
		v71 = -v71;
		v60 = -v60;
		v61 = -v61;
		v62 = -v62;
		v63 = -v63;
		v72 = -v72;
	end;
	local v74, v75, v76, v77 = u4(p36, v56, v57, v58, v59, v60, v61, v62, v63, v72);
	local v78, v79, v80, v81 = u4(p36, v64, v65, v66, v67, v68, v69, v70, v71, v73);
	return u4(2 * p36 * (1 - p36), v74, v75, v76, v77, v78, v79, v80, v81, v74 * v78 + v75 * v79 + v76 * v80 + v77 * v81);
end;
