-- Script Hash: 8d14539bae2e3f6f1a60d6cb2f5270868de1ac9df1a821ddb188089a908a9134116a857de82beb4a244e57cba0a6ac29
-- Decompiled with the Synapse X Luau decompiler.

local v1 = require(script.Parent.assign);
local v2 = require(script.Parent.ComponentLifecyclePhase);
local v3 = require(script.Parent.Type);
local v4 = require(script.Parent.invalidSetStateMessages);
local v5 = require(script.Parent.internalAssert);
local v6 = require(script.Parent.GlobalConfig).get();
local v7 = require(script.Parent.Symbol).named("InternalData");
local v8 = {
	__tostring = function(p1)
		return p1.__componentName;
	end
};
local v9 = {};
setmetatable(v9, v8);
v9[v3] = v3.StatefulComponentClass;
v9.__index = v9;
v9.__componentName = "Component";
function v9.extend(p2, p3)
	if v6.typeChecks then
		assert(v3.of(p2) == v3.StatefulComponentClass, "Invalid `self` argument to `extend`.");
		assert(typeof(p3) == "string", "Component class name must be a string");
	end;
	local v10 = {};
	for v11, v12 in pairs(p2) do
		if v11 ~= "extend" then
			v10[v11] = v12;
		end;
	end;
	v10[v3] = v3.StatefulComponentClass;
	v10.__index = v10;
	v10.__componentName = p3;
	setmetatable(v10, v8);
	return v10;
end;
function v9.__getDerivedState(p4, p5, p6)
	local v13 = nil;
	if v6.internalTypeChecks then
		v5(v3.of(p4) == v3.StatefulComponentInstance, "Invalid use of `__getDerivedState`");
	end;
	local l__componentClass__14 = p4[v7].componentClass;
	if l__componentClass__14.getDerivedStateFromProps ~= nil then
		v13 = l__componentClass__14.getDerivedStateFromProps(p5, p6);
		if v13 == nil then
			return nil;
		end;
	else
		return nil;
	end;
	if v6.typeChecks then
		assert(typeof(v13) == "table", "getDerivedStateFromProps must return a table!");
	end;
	return v13;
end;
function v9.setState(p7, p8)
	local v15 = nil;
	local v16 = nil;
	if v6.typeChecks then
		assert(v3.of(p7) == v3.StatefulComponentInstance, "Invalid `self` argument to `extend`.");
	end;
	local v17 = p7[v7];
	local l__lifecyclePhase__18 = v17.lifecyclePhase;
	if l__lifecyclePhase__18 == v2.ShouldUpdate or l__lifecyclePhase__18 == v2.WillUpdate or l__lifecyclePhase__18 == v2.Render or l__lifecyclePhase__18 == v2.WillUnmount then
		error(v4[v17.lifecyclePhase]:format(tostring(v17.componentClass)), 2);
	end;
	local l__pendingState__19 = v17.pendingState;
	local v20 = nil;
	if typeof(p8) == "function" then
		v20 = p8(l__pendingState__19 or p7.state, p7.props);
		if v20 == nil then
			return;
		end;
	elseif typeof(p8) == "table" then
		v20 = p8;
	else
		error("Invalid argument to setState, expected function or table", 2);
	end;
	if l__pendingState__19 ~= nil then
		local v21 = v1(l__pendingState__19, v20);
	else
		v21 = v1({}, p7.state, v20);
	end;
	if l__lifecyclePhase__18 == v2.Init then
		p7.state = v1(v21, (p7:__getDerivedState(p7.props, v21)));
		return;
	end;
	if l__lifecyclePhase__18 == v2.DidMount or l__lifecyclePhase__18 == v2.DidUpdate or l__lifecyclePhase__18 == v2.ReconcileChildren then
		v17.pendingState = v1(v21, (p7:__getDerivedState(p7.props, v21)));
		return;
	end;
	if l__lifecyclePhase__18 == v2.Idle then
		v15 = v17.virtualNode;
		v16 = v17.reconciler;
		if v6.tempFixUpdateChildrenReEntrancy then
			v16.suspendParentEvents(v15);
		end;
		p7:__update(nil, v21);
		if not v6.tempFixUpdateChildrenReEntrancy then
			return;
		end;
	else
		error(v4.default:format(tostring(v17.componentClass)), 2);
		return;
	end;
	v16.resumeParentEvents(v15);
end;
function v9.getElementTraceback(p9)
	return p9[v7].virtualNode.currentElement.source;
end;
function v9.render(p10)
	error(("The component %q is missing the `render` method.\n`render` must be defined when creating a Roact component!"):format(tostring(p10[v7].componentClass)), 0);
end;
function v9.__getContext(p11, p12)
	if v6.internalTypeChecks then
		v5(v3.of(p11) == v3.StatefulComponentInstance, "Invalid use of `__getContext`");
		v5(p12 ~= nil, "Context key cannot be nil");
	end;
	return p11[v7].virtualNode.context[p12];
end;
function v9.__addContext(p13, p14, p15)
	if v6.internalTypeChecks then
		v5(v3.of(p13) == v3.StatefulComponentInstance, "Invalid use of `__addContext`");
	end;
	local l__virtualNode__22 = p13[v7].virtualNode;
	if l__virtualNode__22.originalContext == nil then
		l__virtualNode__22.originalContext = l__virtualNode__22.context;
	end;
	l__virtualNode__22.context = v1({}, l__virtualNode__22.context, {
		[p14] = p15
	});
end;
function v9.__validateProps(p16, p17)
	if not v6.propValidation then
		return;
	end;
	local l__validateProps__23 = p16[v7].componentClass.validateProps;
	if l__validateProps__23 == nil then
		return;
	end;
	if typeof(l__validateProps__23) ~= "function" then
		error(("validateProps must be a function, but it is a %s.\nCheck the definition of the component %q."):format(typeof(l__validateProps__23), p16.__componentName));
	end;
	local v24, v25 = l__validateProps__23(p17);
	if not v24 then
		error(("Property validation failed in %s: %s\n\n%s"):format(p16.__componentName, tostring(v25 and "<Validator function did not supply a message>"), p16:getElementTraceback() and "<enable element tracebacks>"), 0);
	end;
end;
function v9.__mount(p18, p19, p20)
	if v6.internalTypeChecks then
		v5(v3.of(p18) == v3.StatefulComponentClass, "Invalid use of `__mount`");
		v5(v3.of(p20) == v3.VirtualNode, "Expected arg #2 to be of type VirtualNode");
	end;
	local v26 = {
		reconciler = p19, 
		virtualNode = p20, 
		componentClass = p18, 
		lifecyclePhase = v2.Init
	};
	local v27 = {
		[v3] = v3.StatefulComponentInstance, 
		[v7] = v26
	};
	setmetatable(v27, p18);
	p20.instance = v27;
	local v28 = p20.currentElement.props;
	if p18.defaultProps ~= nil then
		v28 = v1({}, p18.defaultProps, v28);
	end;
	v27:__validateProps(v28);
	v27.props = v28;
	v27._context = v1({}, p20.legacyContext);
	v27.state = v1({}, v27:__getDerivedState(v27.props, {}));
	if v27.init ~= nil then
		v27:init(v27.props);
		v1(v27.state, v27:__getDerivedState(v27.props, v27.state));
	end;
	p20.legacyContext = v27._context;
	v26.lifecyclePhase = v2.Render;
	v26.lifecyclePhase = v2.ReconcileChildren;
	p19.updateVirtualNodeWithRenderResult(p20, p20.hostParent, (v27:render()));
	if v27.didMount ~= nil then
		v26.lifecyclePhase = v2.DidMount;
		v27:didMount();
	end;
	if v26.pendingState ~= nil then
		v27:__update(nil, nil);
	end;
	v26.lifecyclePhase = v2.Idle;
end;
function v9.__unmount(p21)
	if v6.internalTypeChecks then
		v5(v3.of(p21) == v3.StatefulComponentInstance, "Invalid use of `__unmount`");
	end;
	local v29 = p21[v7];
	local l__reconciler__30 = v29.reconciler;
	if p21.willUnmount ~= nil then
		v29.lifecyclePhase = v2.WillUnmount;
		p21:willUnmount();
	end;
	for v31, v32 in pairs(v29.virtualNode.children) do
		l__reconciler__30.unmountVirtualNode(v32);
	end;
end;
function v9.__update(p22, p23, p24)
	if v6.internalTypeChecks then
		v5(v3.of(p22) == v3.StatefulComponentInstance, "Invalid use of `__update`");
		local v33 = true;
		if v3.of(p23) ~= v3.Element then
			v33 = p23 == nil;
		end;
		v5(v33, "Expected arg #1 to be of type Element or nil");
		local v34 = true;
		if typeof(p24) ~= "table" then
			v34 = p24 == nil;
		end;
		v5(v34, "Expected arg #2 to be of type table or nil");
	end;
	local v35 = p22[v7];
	local l__componentClass__36 = v35.componentClass;
	local v37 = p22.props;
	if p23 ~= nil then
		v37 = p23.props;
		if l__componentClass__36.defaultProps ~= nil then
			v37 = v1({}, l__componentClass__36.defaultProps, v37);
		end;
		p22:__validateProps(v37);
	end;
	local v38 = 0;
	while true do
		local v39 = nil;
		if v35.pendingState ~= nil then
			v39 = v35.pendingState;
			v35.pendingState = nil;
		end;
		if p24 ~= nil or v37 ~= p22.props then
			if v39 == nil then
				local v40 = p24 or p22.state;
			else
				v40 = v1(v39, p24);
			end;
			local v41 = p22:__getDerivedState(v37, v40);
			if v41 ~= nil then
				v40 = v1({}, v40, v41);
			end;
			p24 = nil;
		else
			v40 = v39;
		end;
		if not p22:__resolveUpdate(v37, v40) then
			return false;
		end;
		v38 = v38 + 1;
		if v38 > 100 then
			error(("The component %q has reached the setState update recursion limit.\nWhen using `setState` in `didUpdate`, make sure that it won't repeat infinitely!"):format(tostring(v35.componentClass)), 3);
		end;
		if v35.pendingState == nil then
			break;
		end;	
	end;
	return true;
end;
function v9.__resolveUpdate(p25, p26, p27)
	if v6.internalTypeChecks then
		v5(v3.of(p25) == v3.StatefulComponentInstance, "Invalid use of `__resolveUpdate`");
	end;
	local v42 = p25[v7];
	local l__virtualNode__43 = v42.virtualNode;
	local l__props__44 = p25.props;
	local l__state__45 = p25.state;
	if p26 == nil then
		p26 = l__props__44;
	end;
	if p27 == nil then
		p27 = l__state__45;
	end;
	if p25.shouldUpdate ~= nil then
		v42.lifecyclePhase = v2.ShouldUpdate;
		if not p25:shouldUpdate(p26, p27) then
			v42.lifecyclePhase = v2.Idle;
			return false;
		end;
	end;
	if p25.willUpdate ~= nil then
		v42.lifecyclePhase = v2.WillUpdate;
		p25:willUpdate(p26, p27);
	end;
	v42.lifecyclePhase = v2.Render;
	p25.props = p26;
	p25.state = p27;
	v42.lifecyclePhase = v2.ReconcileChildren;
	v42.reconciler.updateVirtualNodeWithRenderResult(l__virtualNode__43, l__virtualNode__43.hostParent, (l__virtualNode__43.instance:render()));
	if p25.didUpdate ~= nil then
		v42.lifecyclePhase = v2.DidUpdate;
		p25:didUpdate(l__props__44, l__state__45);
	end;
	v42.lifecyclePhase = v2.Idle;
	return true;
end;
return v9;
