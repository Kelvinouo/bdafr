-- Script Hash: 71b92a922bffe62da3f28203981783efac28fbd99241e4bc1bef13c184e6a1b3597e2c71d99cdd500a71f53c5c099513
-- Decompiled with the Synapse X Luau decompiler.

local v1 = _G[script];
local v2 = v1.import(script, script.Parent.Parent, "internal");
local l__ServerTickFunctions__3 = v2.ServerTickFunctions;
local function u1(p1)
	warn("[rbx-net]", p1.Message);
end;
local u2 = {};
local u3 = v1.import(script, script, "throttle");
local l__format__4 = v2.format;
local l__GetConfiguration__5 = v1.import(script, script.Parent.Parent, "configuration").GetConfiguration;
if v2.IS_SERVER then
	local u6 = 0;
	l__ServerTickFunctions__3[#l__ServerTickFunctions__3 + 1] = function()
		if u6 + l__GetConfiguration__5("ServerThrottleResetTimer") < tick() then
			u6 = tick();
			u3:Clear();
		end;
	end;
end;
return {
	rateLimitWarningHandler = u1, 
	default = function(p2)
		local v4 = p2.ErrorHandler;
		if v4 == nil then
			v4 = u1;
		end;
		local l__MaxRequestsPerMinute__7 = p2.MaxRequestsPerMinute;
		return function(p3, p4)
			local v5 = p4:GetInstance();
			local v6 = u2[p4];
			if v6 == nil then
				v6 = u3:Get(v5:GetFullName());
			end;
			return function(p5, ...)
				if not (l__MaxRequestsPerMinute__7 <= v6:Get(p5)) then
					v6:Increment(p5);
					return p3(p5, unpack({ ... }));
				end;
				if v4 == nil then
					return;
				end;
				v4({
					Message = l__format__4(l__GetConfiguration__5("ServerThrottleMessage"), {
						player = p5.UserId, 
						remote = v5.Name, 
						limit = l__MaxRequestsPerMinute__7
					}), 
					MaxRequestsPerMinute = l__MaxRequestsPerMinute__7, 
					RemoteId = v5.Name, 
					UserId = p5.UserId
				});
			end;
		end;
	end
};
