-- Script Hash: 61d9f3afaa2b565904f4d0af3444303d44b8298a45c0197fc967e594f2ceaaa129ecbc1607898688c8a9782d789b4b9f
-- Decompiled with the Synapse X Luau decompiler.

local v1 = {};
v1.__index = v1;
v1.ClassName = "Signal";
v1.totalConnections = 0;
function v1.new(p1)
	local v2 = setmetatable({}, v1);
	if p1 then
		v2.connectionsChanged = v1.new();
	end;
	v2.connections = {};
	v2.totalConnections = 0;
	v2.waiting = {};
	v2.totalWaiting = 0;
	return v2;
end;
function v1.Fire(p2, ...)
	for v3, v4 in pairs(p2.connections) do
		v4.Handler(...);
	end;
	if p2.totalWaiting > 0 then
		local v5 = table.pack(...);
		for v6, v7 in pairs(p2.waiting) do
			p2.waiting[v6] = v5;
		end;
	end;
end;
v1.fire = v1.Fire;
local l__HttpService__1 = game:GetService("HttpService");
function v1.Connect(p3, p4)
	if type(p4) ~= "function" then
		error(("connect(%s)"):format(typeof(p4)), 2);
	end;
	local v8 = l__HttpService__1:GenerateGUID(false);
	local v9 = {
		Connected = true, 
		ConnectionId = v8, 
		Handler = p4
	};
	p3.connections[v8] = v9;
	function v9.Disconnect(p5)
		p3.connections[v8] = nil;
		v9.Connected = false;
		p3.totalConnections = p3.totalConnections - 1;
		if p3.connectionsChanged then
			p3.connectionsChanged:Fire(-1);
		end;
	end;
	v9.Destroy = v9.Disconnect;
	v9.destroy = v9.Disconnect;
	v9.disconnect = v9.Disconnect;
	p3.totalConnections = p3.totalConnections + 1;
	if p3.connectionsChanged then
		p3.connectionsChanged:Fire(1);
	end;
	return v9;
end;
v1.connect = v1.Connect;
local l__Heartbeat__2 = game:GetService("RunService").Heartbeat;
function v1.Wait(p6)
	local v10 = l__HttpService__1:GenerateGUID(false);
	p6.waiting[v10] = true;
	p6.totalWaiting = p6.totalWaiting + 1;
	while true do
		l__Heartbeat__2:Wait();
		if p6.waiting[v10] ~= true then
			break;
		end;	
	end;
	p6.totalWaiting = p6.totalWaiting - 1;
	p6.waiting[v10] = nil;
	return unpack(p6.waiting[v10]);
end;
v1.wait = v1.Wait;
function v1.Destroy(p7)
	if p7.bindableEvent then
		p7.bindableEvent:Destroy();
		p7.bindableEvent = nil;
	end;
	if p7.connectionsChanged then
		p7.connectionsChanged:Fire(-p7.totalConnections);
		p7.connectionsChanged:Destroy();
		p7.connectionsChanged = nil;
	end;
	p7.totalConnections = 0;
	for v11, v12 in pairs(p7.connections) do
		p7.connections[v11] = nil;
	end;
end;
v1.destroy = v1.Destroy;
v1.Disconnect = v1.Destroy;
v1.disconnect = v1.Destroy;
return v1;
